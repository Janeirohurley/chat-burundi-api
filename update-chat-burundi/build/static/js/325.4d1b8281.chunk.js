(self.webpackChunkupdate_chat_burundi=self.webpackChunkupdate_chat_burundi||[]).push([[325],{3738:function(e,i,s){var n={"./ar.json":2557,"./be.json":8367,"./cs.json":6037,"./de.json":4896,"./en.json":678,"./es.json":2378,"./fa.json":4057,"./fi.json":7453,"./fr.json":364,"./hi.json":7992,"./it.json":9438,"./ja.json":6847,"./kr.json":9983,"./nl.json":1936,"./pl.json":1902,"./pt.json":9761,"./ru.json":8656,"./sa.json":193,"./tr.json":7349,"./uk.json":3128,"./vi.json":1070,"./zh.json":7268};function t(e){var i=l(e);return s(i)}function l(e){if(!s.o(n,e)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return n[e]}t.keys=function(){return Object.keys(n)},t.resolve=l,e.exports=t,t.id=3738},367:function(e,i,s){"use strict";s(2791);var n=s(184);i.Z=function(e){return document.title="Chat Burundi - "+e.title,(0,n.jsx)("div",{className:"w-100",children:e.children})}},6904:function(e,i,s){"use strict";s.r(i),s.d(i,{default:function(){return k}});var n=s(9439),t=s(2791),l=s(8436),o=s(619),r=s(428),a=s(4165),d=s(5861),c=s(1243),u=s(4212),v=s(2090),h=s(2426),m=s.n(h),f=s(1896),j=s(184),x=function(e){var i,s,l,r=e.user,h=e.chat,x=e.notifications,g=e.markThisNotificationAsRead,p=e.currentChat,N=function(e,i){return{recipientUser:null===i||void 0===i?void 0:i.find((function(i){return i!==(null===e||void 0===e?void 0:e._id)}))}}(r,null===h||void 0===h?void 0:h.users),C=(N.recipientUser,(0,v.AG)(x)),y=null===C||void 0===C?void 0:C.filter((function(e){var i;return e.senderId===(null===(i=(0,f.kR)(null===r||void 0===r?void 0:r._id,null===h||void 0===h?void 0:h.users))||void 0===i?void 0:i._id)})),k=function(e){var i=(0,t.useContext)(o.p),s=i.newMessage,l=i.notifications,r=(0,t.useState)(null),v=(0,n.Z)(r,2),h=v[0],m=v[1];return(0,t.useEffect)((function(){var i=function(){var i=(0,d.Z)((0,a.Z)().mark((function i(){return(0,a.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,c.Z)({method:"get",url:"".concat(u.L,"/api/message/").concat(null===e||void 0===e?void 0:e._id),withCredentials:!0}).then((function(e){var i=e.data,s=i[(null===i||void 0===i?void 0:i.length)-1];m(s)})).catch((function(e){console.log(e)}));case 2:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}();i()}),[s,l]),{latestMessage:h}}(h),_=k.latestMessage;return(0,j.jsxs)("div",{className:(null===h||void 0===h?void 0:h._id)===(null===p||void 0===p?void 0:p._id)?"chat-box active":"chat-box",onClick:function(){0!==(null===y||void 0===y?void 0:y.length)&&g(y,x)},children:[(0,j.jsx)("div",{className:"img-box",children:(0,j.jsx)("img",{className:"img-cover",src:null===(i=(0,f.kR)(null===r||void 0===r?void 0:r._id,null===h||void 0===h?void 0:h.users))||void 0===i?void 0:i.picture,alt:Math.random()})}),(0,j.jsxs)("div",{className:"chat-details",children:[(0,j.jsxs)("div",{className:"text-head",children:[!(null!==h&&void 0!==h&&h.isGroupChat)&&(0,j.jsx)("h4",{children:null===(s=(0,f.kR)(null===r||void 0===r?void 0:r._id,null===h||void 0===h?void 0:h.users))||void 0===s?void 0:s.pseudo}),(null===h||void 0===h?void 0:h.isGroupChat)&&(0,j.jsx)("h4",{children:null===h||void 0===h?void 0:h.chatName}),(0,j.jsx)("p",{className:"time unread",children:m()(null===_||void 0===_?void 0:_.createdAt).calendar()})]}),(0,j.jsxs)("div",{className:"text-message",children:[(0,j.jsx)("p",{children:(l=null===_||void 0===_?void 0:_.message,(null===l||void 0===l?void 0:l.length)>20?"".concat(null===l||void 0===l?void 0:l.substr(0,10),"....."):l)}),(null===y||void 0===y?void 0:y.length)>0&&(0,j.jsx)("b",{children:(null===y||void 0===y?void 0:y.length)>0?y.length:""})]})]})]})},g=function(e){var i,s,n,l=e.currentChat,o=e.messages,r=e.user,a=e.isMessageLoading,d=e.onlineUsers,c=e.updatecurrentChat;return(0,t.useEffect)((function(){if(o){var e,i=document.querySelectorAll(".message-box");null===(e=i[(null===i||void 0===i?void 0:i.length)-1])||void 0===e||e.scrollIntoView({behavior:"smooth"})}}),[o]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"header",children:[(0,j.jsx)("i",{className:"ri-arrow-left-line",onClick:function(){return c(null)}}),(0,j.jsxs)("div",{className:"img-text",children:[(0,j.jsx)("div",{className:"user-img",children:(0,j.jsx)("img",{className:"dp",src:null===(i=(0,f.kR)(null===r||void 0===r?void 0:r._id,null===l||void 0===l?void 0:l.users))||void 0===i?void 0:i.picture,alt:"jjd"})}),(0,j.jsxs)("h4",{children:[null===(s=(0,f.kR)(null===r||void 0===r?void 0:r._id,null===l||void 0===l?void 0:l.users))||void 0===s?void 0:s.pseudo,(0,j.jsx)("br",{}),(0,j.jsx)("span",{children:(0,f.Gg)(null===(n=(0,f.kR)(null===r||void 0===r?void 0:r._id,null===l||void 0===l?void 0:l.users))||void 0===n?void 0:n._id,d)?"Online":"offline"})]})]}),(0,j.jsxs)("div",{className:"nav-icons",children:[(0,j.jsx)("i",{className:"ri-search-line"}),(0,j.jsx)("li",{children:(0,j.jsx)("i",{className:"fa-solid fa-ellipsis-vertical"})})]})]}),a&&(0,j.jsx)("p",{style:{textAlign:"center",width:"100%",justifyContent:"center",display:"flex",fontSize:"2rem",height:"100%"}}),!a&&(0,j.jsx)("div",{className:"chat-container",children:o&&(null===o||void 0===o?void 0:o.map((function(e,i){var s;return(0,j.jsx)("div",{className:(null===e||void 0===e||null===(s=e.sender)||void 0===s?void 0:s._id)===(null===r||void 0===r?void 0:r._id)?"message-box my-message":"message-box friend-message",children:(0,j.jsxs)("p",{children:[null===e||void 0===e?void 0:e.message,(0,j.jsx)("br",{}),(0,j.jsx)("span",{children:m()(e.createdAt).calendar()})]})},i)})))})]})},p=s(3044),N=function(e){var i=e.potentielsChats,s=e.creatChat;return(0,t.useEffect)((function(){var e=document.querySelector(".carousel");document.querySelectorAll(".potentiel-chats i").forEach((function(i){i.addEventListener("click",(function(i){"left"===i.target.id?e.scrollLeft-=10:e.scrollLeft+=10}))}));var i,s,n=!1;e.addEventListener("mousedown",(function(t){n=!0,e.classList.add("dragging"),i=t.pageX,s=e.scrollLeft})),e.addEventListener("mousemove",(function(t){n&&(e.scrollLeft=s-(t.pageX-i))})),document.addEventListener("mouseup",(function(){n=!1,e.classList.remove("dragging")}))}),[]),(0,j.jsxs)("div",{className:"potentiel-chats",children:[(0,j.jsx)("i",{className:"ri-arrow-drop-right-line",id:"left"}),(0,j.jsx)("div",{className:"carousel mouving",children:null===i||void 0===i?void 0:i.map((function(e,i){return(0,j.jsx)(p.Z,{src:null===e||void 0===e?void 0:e.picture,alt:"heloo",name:"profile",className:"avatar",onClick:function(){return s(null===e||void 0===e?void 0:e._id)}},i)}))}),(0,j.jsx)("i",{className:"ri-arrow-drop-left-line",id:"right"})]})},C=s(367),y=s(724),k=function(e){var i,s=e.socket,a=(0,t.useContext)(o.p),d=a.userChats,c=(a.isUserChatsLoading,a.userChatsError,a.potentielsChats),u=a.creatChat,v=a.updatecurrentChat,h=a.currentChat,m=a.messages,f=a.isMessageLoading,p=a.sendTexMessage,k=a.onlineUsers,_=a.notifications,b=a.markThisNotificationAsRead,w=a.InputRef,L=(0,t.useContext)(l.V).user,S=(0,t.useState)(""),A=(0,n.Z)(S,2),E=A[0],M=A[1];return(0,t.useEffect)((function(){if(L&&null!==L&&void 0!==L&&L.pseudo){var e=document.querySelector(":root"),i=JSON.parse(localStorage.getItem("".concat(L._id)));i&&(i.primaryHue&&e.style.setProperty("--color-primary-hue",i.primaryHue),i.font_size&&(document.querySelector("html").style.fontSize=i.font_size),i.lightcolorlightness&&e.style.setProperty("--light-color-lightness",i.lightcolorlightness),i.whitecolorlightness&&e.style.setProperty("--white-color-lightness",i.whitecolorlightness),i.darkcolorlightness&&e.style.setProperty("--dark-color-lightness",i.darkcolorlightness),i.colornamelightness&&e.style.setProperty("--color-name-lightness",i.colornamelightness))}}),[s,L.pseudo,L]),(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(C.Z,{title:"messenger",children:(0,j.jsxs)("div",{className:"main-container",children:[(0,j.jsxs)("div",{className:"left-container",ref:w,children:[(0,j.jsxs)("div",{className:"header",children:[(0,j.jsx)("div",{className:"user-img",children:(0,j.jsx)("img",{className:"dp",src:null===L||void 0===L?void 0:L.picture,alt:"heloo"})}),(0,j.jsxs)("div",{className:"nav-icons",children:[(0,j.jsx)("li",{children:(0,j.jsx)("i",{className:"ri-group-line"})}),(0,j.jsx)("li",{children:(0,j.jsx)("i",{className:"ri-chat-2-line"})}),(0,j.jsx)("li",{children:(0,j.jsx)("i",{className:"ri-more-2-fill"})})]})]}),(0,j.jsx)(N,{potentielsChats:c,creatChat:u}),(0,j.jsxs)("div",{className:"search-container",children:[(0,j.jsxs)("div",{className:"input",children:[(0,j.jsx)("i",{className:"ri-search-line"}),(0,j.jsx)("input",{type:"text",placeholder:"Search or start new chat   "})]}),(0,j.jsx)("i",{className:"ri-more-fill"})]}),(0,j.jsx)("div",{className:"chat-list",children:null===d||void 0===d||null===(i=d.sort((function(e,i){var s,n;return Number(null===e||void 0===e||null===(s=e.latestMessage)||void 0===s?void 0:s.createdAt)-Number(null===i||void 0===i||null===(n=i.latestMessage)||void 0===n?void 0:n.createdAt)})))||void 0===i?void 0:i.map((function(e,i){return(0,j.jsx)("div",{onClick:function(){return v(e)},children:(0,j.jsx)(x,{user:L,chat:e,notifications:_,markThisNotificationAsRead:b,currentChat:h})},i)}))})]}),(0,j.jsxs)("div",{className:"right-container",children:[!h&&(0,j.jsx)("p",{style:{textAlign:"center",width:"100%",justifyContent:"center",display:"flex",fontSize:"2rem",height:"100%"},children:"no conversation selected yet......"}),h&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(g,{user:L,currentChat:h,messages:m,isMessageLoading:f,onlineUsers:k,updatecurrentChat:v}),(0,j.jsxs)("div",{className:"chatbox-input",children:[(0,j.jsx)("i",{className:"ri-attachment-2"}),(0,j.jsx)("i",{className:"ri-mic-line"}),(0,j.jsx)(y.Z,{value:E,onChange:M,fontFamily:"nonito"}),(0,j.jsx)(r.Z,{onClick:function(){return p(E,h,M)},children:"send"})]})]})]})]})})})}}}]);
//# sourceMappingURL=325.4d1b8281.chunk.js.map