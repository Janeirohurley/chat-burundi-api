(self.webpackChunkupdate_chat_burundi=self.webpackChunkupdate_chat_burundi||[]).push([[325],{3738:function(e,i,s){var n={"./ar.json":2557,"./be.json":8367,"./cs.json":6037,"./de.json":4896,"./en.json":678,"./es.json":2378,"./fa.json":4057,"./fi.json":7453,"./fr.json":364,"./hi.json":7992,"./it.json":9438,"./ja.json":6847,"./kr.json":9983,"./nl.json":1936,"./pl.json":1902,"./pt.json":9761,"./ru.json":8656,"./sa.json":193,"./tr.json":7349,"./uk.json":3128,"./vi.json":1070,"./zh.json":7268};function l(e){var i=t(e);return s(i)}function t(e){if(!s.o(n,e)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return n[e]}l.keys=function(){return Object.keys(n)},l.resolve=t,e.exports=l,l.id=3738},367:function(e,i,s){"use strict";s(2791);var n=s(184);i.Z=function(e){return document.title="Chat Burundi - "+e.title,(0,n.jsx)("div",{className:"w-100",children:e.children})}},6904:function(e,i,s){"use strict";s.r(i),s.d(i,{default:function(){return E}});var n=s(2791),l=s(8436),t=s(619),o=s(428),r=s(4165),d=s(5861),a=s(9439),c=s(2090),u=s(1243),v=s(4212),h=s(2426),m=s.n(h),j=s(1896),x=s(184),f=function(e){var i,s,l,t=e.user,o=e.chat,h=e.notifications,f=e.markThisNotificationAsRead,g=e.currentChat,p=e.lastetMessageSend,N=e.statusTyping,y=function(e,i){return{recipientUser:null===i||void 0===i?void 0:i.find((function(i){return i!==(null===e||void 0===e?void 0:e._id)}))}}(t,null===o||void 0===o?void 0:o.users),C=(y.recipientUser,(0,c.AG)(h)),k=null===C||void 0===C?void 0:C.filter((function(e){var i;return e.senderId===(null===(i=(0,j.kR)(null===t||void 0===t?void 0:t._id,null===o||void 0===o?void 0:o.users))||void 0===i?void 0:i._id)})),_=(0,n.useState)(null),b=(0,a.Z)(_,2),w=b[0],E=b[1];(0,n.useEffect)((function(){void 0!==p&&o._id===p.chat._id&&(null===g||void 0===g?void 0:g._id)===(null===p||void 0===p?void 0:p.chat._id)&&E(p)}),[p]);var L=(0,n.useCallback)((0,d.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.Z)({method:"get",url:"".concat(v.L,"/api/message/").concat(null===o||void 0===o?void 0:o._id),withCredentials:!0}).then((function(e){var i=e.data,s=i[(null===i||void 0===i?void 0:i.length)-1];E(s)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),[h]);(0,n.useEffect)((function(){L()}),[L]);var S;return(0,x.jsxs)("div",{className:(null===o||void 0===o?void 0:o._id)===(null===g||void 0===g?void 0:g._id)?"chat-box active":"chat-box",onClick:function(){0!==(null===k||void 0===k?void 0:k.length)&&f(k,h)},children:[(0,x.jsx)("div",{className:"img-box",children:(0,x.jsx)("img",{className:"img-cover",src:null===(i=(0,j.kR)(null===t||void 0===t?void 0:t._id,null===o||void 0===o?void 0:o.users))||void 0===i?void 0:i.picture,alt:Math.random()})}),(0,x.jsxs)("div",{className:"chat-details",children:[(0,x.jsxs)("div",{className:"text-head",children:[!(null!==o&&void 0!==o&&o.isGroupChat)&&(0,x.jsx)("h4",{children:null===(s=(0,j.kR)(null===t||void 0===t?void 0:t._id,null===o||void 0===o?void 0:o.users))||void 0===s?void 0:s.pseudo}),(null===o||void 0===o?void 0:o.isGroupChat)&&(0,x.jsx)("h4",{children:null===o||void 0===o?void 0:o.chatName}),(0,x.jsx)("p",{className:"time unread",children:m()(null===w||void 0===w?void 0:w.createdAt).calendar()})]}),N&&N.currentChat===(null===o||void 0===o?void 0:o._id)&&!0===N.typing?(0,x.jsx)("div",{className:"text-message",children:"typing..."}):(0,x.jsxs)("div",{className:"text-message",children:[(0,x.jsx)("p",{children:(S=null===w||void 0===w?void 0:w.message,(null===S||void 0===S?void 0:S.length)>20?"".concat(null===S||void 0===S?void 0:S.substr(0,10),"....."):S)}),(null===w||void 0===w||null===(l=w.sender)||void 0===l?void 0:l._id)===(null===t||void 0===t?void 0:t._id)&&(0,x.jsx)("span",{children:"PENDING"===w.status?(0,x.jsx)("i",{className:"ri-loader-2-fill"}):(0,x.jsx)("i",{className:"ri-check-double-line"})}),(null===k||void 0===k?void 0:k.length)>0&&(0,x.jsx)("b",{children:(null===k||void 0===k?void 0:k.length)>0?k.length:""})]})]})]})},g=(0,n.memo)(f),p=function(e){var i,s,l,t=e.currentChat,o=e.messages,r=e.user,d=e.isMessageLoading,a=e.onlineUsers,c=e.updatecurrentChat,u=e.statusTyping;return(0,n.useEffect)((function(){if(o){var e,i=document.querySelectorAll(".message-box");null===(e=i[(null===i||void 0===i?void 0:i.length)-1])||void 0===e||e.scrollIntoView({behavior:"smooth"})}}),[o]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"header",children:[(0,x.jsx)("i",{className:"ri-arrow-left-line",onClick:function(){return c(null)}}),(0,x.jsxs)("div",{className:"img-text",children:[(0,x.jsx)("div",{className:"user-img",children:(0,x.jsx)("img",{className:"dp",src:null===(i=(0,j.kR)(null===r||void 0===r?void 0:r._id,null===t||void 0===t?void 0:t.users))||void 0===i?void 0:i.picture,alt:"jjd"})}),(0,x.jsxs)("h4",{children:[null===(s=(0,j.kR)(null===r||void 0===r?void 0:r._id,null===t||void 0===t?void 0:t.users))||void 0===s?void 0:s.pseudo,(0,x.jsx)("br",{}),(null===u||void 0===u?void 0:u.currentChat)===(null===t||void 0===t?void 0:t._id)&&!0===(null===u||void 0===u?void 0:u.typing)&&(null===u||void 0===u?void 0:u.currentUser)!==(null===r||void 0===r?void 0:r._id)?(0,x.jsx)("span",{children:"typing..."}):(0,x.jsx)("span",{children:(0,j.Gg)(null===(l=(0,j.kR)(null===r||void 0===r?void 0:r._id,null===t||void 0===t?void 0:t.users))||void 0===l?void 0:l._id,a)?"  Online":"offline"})]})]}),(0,x.jsxs)("div",{className:"nav-icons",children:[(0,x.jsx)("i",{className:"ri-search-line"}),(0,x.jsx)("li",{children:(0,x.jsx)("i",{className:"fa-solid fa-ellipsis-vertical"})})]})]}),d&&(0,x.jsx)("p",{style:{textAlign:"center",width:"100%",justifyContent:"center",display:"flex",fontSize:"2rem",height:"100%"}}),!d&&(0,x.jsx)("div",{className:"chat-container",children:o&&(null===o||void 0===o?void 0:o.map((function(e,i){var s,n;return(0,x.jsx)("div",{className:(null===e||void 0===e||null===(s=e.sender)||void 0===s?void 0:s._id)===(null===r||void 0===r?void 0:r._id)?"message-box my-message":"message-box friend-message",children:(0,x.jsxs)("p",{children:[null===e||void 0===e?void 0:e.message,(0,x.jsx)("br",{}),(0,x.jsxs)("span",{children:[m()(e.createdAt).calendar(),(null===e||void 0===e||null===(n=e.sender)||void 0===n?void 0:n._id)===(null===r||void 0===r?void 0:r._id)&&(0,x.jsx)("span",{className:"marksdeliverpending",children:"PENDING"===e.status?(0,x.jsx)("i",{className:"ri-loader-2-fill"}):(0,x.jsx)("i",{className:"ri-check-double-line"})})]})]})},i)})))})]})},N=(0,n.memo)(p),y=s(3044),C=s(6520),k=function(e){var i=e.potentielsChats,s=e.creatChat;return(0,n.useEffect)((function(){var e=document.querySelector(".carousel");document.querySelectorAll(".potentiel-chats i").forEach((function(i){i.addEventListener("click",(function(i){"left"===i.target.id?e.scrollLeft-=10:e.scrollLeft+=10}))}));var i,s,n=!1;e.addEventListener("mousedown",(function(l){n=!0,e.classList.add("dragging"),i=l.pageX,s=e.scrollLeft})),e.addEventListener("mousemove",(function(l){n&&(e.scrollLeft=s-(l.pageX-i))})),document.addEventListener("mouseup",(function(){n=!1,e.classList.remove("dragging")}))}),[]),(0,x.jsxs)("div",{className:"potentiel-chats",children:[(0,x.jsx)("i",{className:"ri-arrow-drop-right-line",id:"left"}),(0,x.jsx)("div",{className:"carousel mouving",children:null===i||void 0===i?void 0:i.map((function(e,i){return(0,x.jsx)(C.Z,{title:null===e||void 0===e?void 0:e.pseudo,arrow:!0,children:(0,x.jsx)(y.Z,{src:null===e||void 0===e?void 0:e.picture,alt:"heloo",name:"profile",className:"avatar",onClick:function(){return s(null===e||void 0===e?void 0:e._id)}},i)},i)}))}),(0,x.jsx)("i",{className:"ri-arrow-drop-left-line",id:"right"})]})},_=(0,n.memo)(k),b=s(367),w=s(724),E=function(e){var i,s=e.socket,r=(0,n.useContext)(t.p),d=r.userChats,a=(r.isUserChatsLoading,r.userChatsError,r.potentielsChats),c=r.creatChat,u=r.updatecurrentChat,v=r.currentChat,h=r.messages,m=r.isMessageLoading,j=r.sendTexMessage,f=r.onlineUsers,p=r.notifications,y=r.markThisNotificationAsRead,C=r.InputRef,k=r.lastetMessageSend,E=r.textMessage,L=r.setTextMessage,S=r.statusTyping,M=(0,n.useContext)(l.V).user;return(0,n.useEffect)((function(){if(M&&null!==M&&void 0!==M&&M.pseudo){var e=document.querySelector(":root"),i=JSON.parse(localStorage.getItem("".concat(M._id)));i&&(i.primaryHue&&e.style.setProperty("--color-primary-hue",i.primaryHue),i.font_size&&(document.querySelector("html").style.fontSize=i.font_size),i.lightcolorlightness&&e.style.setProperty("--light-color-lightness",i.lightcolorlightness),i.whitecolorlightness&&e.style.setProperty("--white-color-lightness",i.whitecolorlightness),i.darkcolorlightness&&e.style.setProperty("--dark-color-lightness",i.darkcolorlightness),i.colornamelightness&&e.style.setProperty("--color-name-lightness",i.colornamelightness),i.blackcolorlightness&&e.style.setProperty("--black-color-lightness",i.blackcolorlightness))}}),[s,null===M||void 0===M?void 0:M.pseudo,M]),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(b.Z,{title:"messenger",children:(0,x.jsxs)("div",{className:"main-container",children:[(0,x.jsxs)("div",{className:"left-container",ref:C,children:[(0,x.jsxs)("div",{className:"header",children:[(0,x.jsx)("div",{className:"user-img",children:(0,x.jsx)("img",{className:"dp",src:null===M||void 0===M?void 0:M.picture,alt:"heloo"})}),(0,x.jsxs)("div",{className:"nav-icons",children:[(0,x.jsx)("li",{children:(0,x.jsx)("i",{className:"ri-group-line"})}),(0,x.jsx)("li",{children:(0,x.jsx)("i",{className:"ri-chat-2-line"})}),(0,x.jsx)("li",{children:(0,x.jsx)("i",{className:"ri-more-2-fill"})})]})]}),(0,x.jsx)(_,{potentielsChats:a,creatChat:c}),(0,x.jsx)("div",{className:"search-container",children:(0,x.jsxs)("div",{className:"input",children:[(0,x.jsx)("i",{className:"ri-search-line"}),(0,x.jsx)("input",{type:"text",placeholder:"Search or start new chat   "})]})}),(0,x.jsx)("div",{className:"chat-list",children:null===d||void 0===d||null===(i=d.sort((function(e,i){var s,n;return Number(null===e||void 0===e||null===(s=e.latestMessage)||void 0===s?void 0:s.createdAt)-Number(null===i||void 0===i||null===(n=i.latestMessage)||void 0===n?void 0:n.createdAt)})))||void 0===i?void 0:i.map((function(e,i){return(0,x.jsx)("div",{onClick:function(){return u(e)},children:(0,x.jsx)(g,{user:M,chat:e,notifications:p,statusTyping:S,markThisNotificationAsRead:y,currentChat:v,lastetMessageSend:k})},i)}))})]}),(0,x.jsxs)("div",{className:"right-container",children:[!v&&(0,x.jsx)("p",{style:{textAlign:"center",width:"100%",justifyContent:"center",display:"flex",fontSize:"2rem",height:"100%"},children:"no conversation selected yet......"}),v&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(N,{user:M,statusTyping:S,currentChat:v,messages:h,isMessageLoading:m,onlineUsers:f,updatecurrentChat:u}),(0,x.jsxs)("div",{className:"chatbox-input",children:[(0,x.jsx)("i",{className:"ri-attachment-2"}),(0,x.jsx)("i",{className:"ri-mic-line"}),(0,x.jsx)(w.Z,{value:E,borderColor:"transparent",onChange:L,borderRadius:0,fontFamily:"nonito",onEnter:function(){return j(E,v,L)},shouldReturn:!0}),(0,x.jsx)(o.Z,{onClick:function(){return j(E,v,L)},children:"send"})]})]})]})]})})})}}}]);
//# sourceMappingURL=325.b0e3b257.chunk.js.map