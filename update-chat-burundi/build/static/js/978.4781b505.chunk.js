"use strict";(self.webpackChunkupdate_chat_burundi=self.webpackChunkupdate_chat_burundi||[]).push([[978],{367:function(e,n,i){i(2791);var t=i(184);n.Z=function(e){return document.title="Chat Burundi - "+e.title,(0,t.jsx)("div",{className:"w-100",children:e.children})}},3821:function(e,n,i){var t=i(9439),s=i(2791),r=i(9434),o=i(7689),l=i(1087),a=i(1896),c=i(1933),d=i(6587),u=i(3044),f=i(184),h=(0,s.memo)((function(){var e=(0,r.v9)((function(e){return e.getusers})),n=(0,r.v9)((function(e){return e.userInfo})),i=(0,s.useState)(!0),h=(0,t.Z)(i,2),v=h[0],g=h[1],p=(0,s.useState)(!0),x=(0,t.Z)(p,2),m=x[0],j=x[1],w=(0,s.useState)([]),N=(0,t.Z)(w,2),Z=N[0],b=N[1],k=(0,s.useState)([]),y=(0,t.Z)(k,2),_=y[0],L=y[1],C=(0,r.v9)((function(e){return e.AllChat})),S=(0,r.v9)((function(e){return e.OnlineUsers})),M=(0,c.g)().setSelectedChat,E=(0,o.s0)();(0,s.useEffect)((function(){if(!(0,a.xb)(C[0])){var e=C.filter((function(e){return e.latestMessage})),n=Object.keys(e).map((function(n){return e[n]})).sort((function(e,n){var i,t;return(null===(i=n.latestMessage)||void 0===i?void 0:i.createdAt)-(null===(t=e.latestMessage)||void 0===t?void 0:t.createdAt)}));n.length=3,L(n)}}),[C]),(0,s.useEffect)((function(){!m||(0,a.xb)(e[0])||(0,a.xb)(n._id)||(!function(){for(var i=[],t=0;t<e.length;t++)e[t]===n._id||e[t].followers.includes(n._id)||i.push(e[t]._id);i.sort((function(){return.5-Math.random()})),window.innerHeight>70&&(i.length=5),b(i)}(),g(!1),j(!1))}),[e,n,m]);return(0,f.jsx)("div",{children:(0,f.jsxs)("div",{className:"right",children:[(0,f.jsxs)("div",{className:"messages",children:[(0,f.jsx)("div",{className:"heading",children:(0,f.jsx)("h4",{children:"Latest Messages"})}),_&&_.map((function(e){var i,t,s,r,o;return(0,f.jsxs)("div",{className:"message",onClick:function(){return function(e){M(e),E("/messenger")}(e)},children:[(0,f.jsxs)("div",{className:"profile-picture",children:[(0,f.jsx)(u.Z,{src:null===(i=e.latestMessage)||void 0===i?void 0:i.sender.picture,alt:"aa"}),(0,f.jsx)("div",{className:(0,a.Gg)(null===(t=e.latestMessage)||void 0===t?void 0:t.sender._id,S)?"active":""})]}),(0,f.jsxs)("div",{className:"messge-body",children:[(0,f.jsx)("h5",{children:(null===(s=e.latestMessage)||void 0===s?void 0:s.sender.pseudo)===n.pseudo?"You":null===(r=e.latestMessage)||void 0===r?void 0:r.sender.pseudo}),(0,f.jsxs)("p",{className:"text-muted",children:[(0,a.F8)(null===(o=e.latestMessage)||void 0===o?void 0:o.message)," "]})]})]},e._id)}))]}),(0,s.useMemo)((function(){return(0,f.jsxs)("div",{className:"freind-requests",children:[(0,f.jsx)("h4",{children:"Suggestions"}),v?(0,f.jsx)("div",{className:"feed",children:"Loading....."}):(0,f.jsxs)(f.Fragment,{children:[Z&&Z.map((function(i){for(var t=0;t<e.length;t++)if(i===e[t]._id&&i!==n._id)return(0,f.jsxs)("div",{className:"request",children:[(0,f.jsxs)("div",{className:"info",children:[(0,f.jsx)("div",{className:"profile-picture",children:(0,f.jsx)(u.Z,{src:e[t].picture,alt:"aa"})}),(0,f.jsxs)("div",{children:[(0,f.jsx)(l.rU,{className:"linkProfile",to:"/profile/".concat(e[t]._id),children:(0,f.jsx)("h5",{className:"noum",children:e[t].pseudo})}),(0,f.jsxs)("p",{className:"text-muted",children:[e[t].following.length," following"]})]})]}),(0,f.jsxs)("div",{className:"action",children:[(0,f.jsx)(d.Z,{idTofollow:i,type:"suggestion"}),(0,f.jsx)("button",{className:" btn-new",children:"gretting"})]})]},Math.random())})),(0,f.jsx)("div",{className:"request",children:(0,f.jsx)("div",{className:"profile-picture-ab",children:"For Looking others......"})})]})]})}),[Z,e,v,n._id])]})})}));n.Z=h},5194:function(e,n,i){i.d(n,{Z:function(){return o}});i(2791);var t=i(7047),s=i(1582),r=i(184);function o(){return(0,r.jsxs)(s.Z,{spacing:1,sx:{backgroundColor:"var(--color-white)",margin:"1rem 0rem",padding:"1.1rem",borderRadius:"10px"},children:[(0,r.jsx)(t.Z,{variant:"circular",width:40,height:40,sx:{backgroundColor:"var(--color-light)"}}),(0,r.jsx)(t.Z,{variant:"text",sx:{fontSize:"1rem",backgroundColor:"var(--color-light)"}}),(0,r.jsx)(t.Z,{variant:"rectangular",width:"100%",height:200,sx:{backgroundColor:"var(--color-light)"}}),(0,r.jsx)(t.Z,{variant:"rounded",width:"100%",height:60,sx:{backgroundColor:"var(--color-light)"}})]})}},6587:function(e,n,i){var t=i(4165),s=i(5861),r=i(9439),o=i(1243),l=i(2791),a=i(9434),c=i(7498),d=i(1896),u=i(4212),f=i(184);n.Z=function(e){var n=e.idTofollow,i=e.type,h=e.socket,v=(0,l.useState)(!1),g=(0,r.Z)(v,2),p=g[0],x=g[1],m=(0,a.I0)(),j=(0,a.v9)((function(e){return e.userInfo})),w=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n,i){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,(0,o.Z)({method:"patch",url:"".concat(u.L,"/api/user/follow/").concat(n),withCredentials:!0,data:{idToFollow:i}}).then((function(e){m(c.Z.Follow(i)),(0,o.Z)({method:"patch",url:"".concat(u.L,"/api/post/notification/").concat(i),data:{notifieId:j._id,notifiePseudo:j.pseudo,notification:"start following  u",status:"pending",pictureNotifie:j.picture},withCredentials:!0}).then((function(e){console.log(e),h.emit("sendNotification",{senderName:j._id,resverName:i,timeNot:new Date})})).catch((function(e){return console.log(e)}))})).catch((function(e){console.log(e.message)}));case 3:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}(),N=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(i,s){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!1),e.next=3,(0,o.Z)({method:"patch",url:"".concat(u.L,"/api/user/unfollow/").concat(i),withCredentials:!0,data:{idToUnFollow:s}}).then((function(e){m(c.Z.UnFollow(n))})).catch((function(e){console.log(e.message)}));case 3:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){(0,d.xb)(j.following)||(j.following.includes(n)?x(!0):x(!1))}),[j,n]),(0,f.jsxs)(f.Fragment,{children:[!0===p&&(0,f.jsxs)("span",{onClick:function(){return N(j._id,n)},children:["suggestion"===i&&(0,f.jsx)("button",{className:"btn btn-primary",children:"UnFollow"}),"card"===i&&(0,f.jsx)("i",{className:"ri-checkbox-circle-fill"})]}),!1===p&&n!==j._id&&(0,f.jsxs)("span",{onClick:function(){return w(j._id,n)},children:["suggestion"===i&&(0,f.jsx)("button",{className:"btn btn-primary",children:"follow"}),"card"===i&&(0,f.jsx)("i",{className:"ri-checkbox-circle-line"})]}),!1===p&&n===j._id&&(0,f.jsxs)("span",{children:["suggestion"===i&&(0,f.jsx)("button",{className:"btn btn-primary disableButton",children:"follow"}),"card"===i&&(0,f.jsx)("i",{className:"ri-checkbox-circle-line"})]})]})}},3682:function(e,n,i){i.r(n);var t=i(4165),s=i(5861),r=i(9439),o=i(2791),l=i(367),a=i(3821),c=i(7689),d=i(6587),u=i(3044),f=i(9445),h=i(9453),v=i(1087),g=i(4212),p=i(1243),x=i(9434),m=i(5752),j=i(184);n.default=function(e){var n=e.socket,i=(0,x.v9)((function(e){return e.userInfo})),w=(0,x.v9)((function(e){return e.getusers})),N=(0,x.v9)((function(e){return e.Allpost})),Z=(0,o.useState)(),b=(0,r.Z)(Z,2),k=b[0],y=b[1],_=(0,o.useState)(),L=(0,r.Z)(_,2),C=L[0],S=L[1],M=(0,o.useState)(),E=(0,r.Z)(M,2),F=E[0],q=E[1],A=(0,o.useState)(),U=(0,r.Z)(A,2),I=U[0],P=U[1],G=(0,x.I0)(),T=(0,c.UO)();return(0,o.useEffect)((function(){if((null===k||void 0===k?void 0:k.length)>0){var e=document.querySelector(".carousel");document.querySelectorAll(".himfollowers i").forEach((function(n){n.addEventListener("click",(function(n){console.log(n.target.id),"left"===n.target.id?e.scrollLeft-=10:e.scrollLeft+=10}))}));var n,i,t=!1;e.addEventListener("mousedown",(function(s){t=!0,e.classList.add("dragging"),n=s.pageX,i=e.scrollLeft})),e.addEventListener("mousemove",(function(s){t&&(e.scrollLeft=i-(s.pageX-n))})),document.addEventListener("mouseup",(function(){t=!1,e.classList.remove("dragging")}))}}),[null===k||void 0===k?void 0:k.length]),(0,o.useEffect)((function(){if(T.id){var e=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.id){e.next=3;break}return e.next=3,(0,p.Z)({method:"get",url:"".concat(g.L,"/api/user/").concat(T.id),withCredentials:!0}).then((function(e){var n=e.data;P(n)})).catch((function(){return console.log("no data found")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}var n=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.id){e.next=3;break}return e.next=3,(0,p.Z)({method:"get",url:"".concat(g.L,"/api/user"),withCredentials:!0}).then((function(e){G(h.O.GetuAllsers(e.data))})).catch((function(){return G(h.O.GetuAllsers({message:"no user exist now"}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n();var i=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.id){e.next=3;break}return e.next=3,(0,p.Z)({method:"get",url:"".concat(g.L,"/api/post"),withCredentials:!0}).then((function(e){var n=e.data;G(f.s.GetAll(n)),console.log("fetch again from profile outher ")})).catch((function(){return G(f.s.GetAll({message:"no post exist now"}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();i()}),[T.id]),(0,o.useEffect)((function(){if(T.id||N){var e=w.filter((function(e){return e.following.includes(T.id)}));console.log(e),y(e);var n=N.filter((function(e){return e.posterId===T.id}));q(n),console.log(n);for(var i=0,t=0;t<(null===F||void 0===F?void 0:F.length);t++)i+=F[t].likers.length;S(i)}}),[T.id,N]),(0,j.jsx)(l.Z,{title:"other profile",children:(0,j.jsx)("div",{className:"container",children:(0,j.jsxs)("div",{className:"wrapper",children:[(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,j.jsxs)("div",{className:"profile",children:[(0,j.jsx)("div",{className:"image",children:(0,j.jsx)("img",{src:null===I||void 0===I?void 0:I.picture,alt:I&&(null===I||void 0===I?void 0:I._id)})}),(0,j.jsxs)("div",{className:"wrapper-2",children:[(0,j.jsx)("div",{style:{width:"9rem",height:"9rem",overflow:"hidden",borderRadius:"50%",position:"relative",top:"-70px",left:"20px",border:"6px solid var(--color-white)"},children:(0,j.jsx)(u.Z,{style:{display:"absolute",top:"0",left:"0",width:"100%",height:"100%"},src:null===I||void 0===I?void 0:I.picture,alt:null===I||void 0===I?void 0:I.pseudo})}),(0,j.jsxs)("div",{className:"infos",children:[(0,j.jsx)("h4",{children:null===I||void 0===I?void 0:I.pseudo}),(0,j.jsx)("span",{children:"\xc9tudiant(e) \xe0 univeriste polytechinique de gitega(UPG)"}),(0,j.jsx)("small",{children:"kinyinya,ruyigi,burundi"}),(0,j.jsxs)("div",{className:"followFollowing",children:[(0,j.jsxs)("span",{children:[null===I||void 0===I?void 0:I.followers.length," followers"]}),(0,j.jsxs)("span",{children:[null===I||void 0===I?void 0:I.following.length," following"]}),(0,j.jsxs)("span",{children:[null===F||void 0===F?void 0:F.length," Posts"]}),(0,j.jsxs)("span",{children:[C," Likes"]})]}),(0,j.jsx)("span",{children:"la vie est plus bon que tu le pense mais aussi est plud dur que bon buy jeneiro hurley"}),(0,j.jsxs)("div",{className:"action",children:[(0,j.jsx)(d.Z,{idTofollow:T.id,type:"suggestion"})," ",(0,j.jsx)("button",{className:" btn-new",children:"gretting"})]})]})]})]}),(null===k||void 0===k?void 0:k.length)>0&&(0,j.jsxs)("div",{className:"himfollowers",children:[(null===k||void 0===k?void 0:k.length)>3&&(0,j.jsx)("i",{className:"ri-arrow-drop-left-line",id:"left"}),(0,j.jsx)("div",{className:"carousel",children:null===k||void 0===k?void 0:k.map((function(e,n){return(0,j.jsxs)("div",{className:"request",children:[(0,j.jsxs)("div",{className:"info",children:[(0,j.jsx)("div",{className:"profile-picture",children:(0,j.jsx)(u.Z,{src:null===e||void 0===e?void 0:e.picture,alt:"aa"})}),(0,j.jsxs)("div",{children:[(0,j.jsx)(v.rU,{className:"linkProfile",to:"/profile/".concat(null===e||void 0===e?void 0:e._id),children:(0,j.jsx)("h5",{className:"noum",children:null===e||void 0===e?void 0:e.pseudo})}),(0,j.jsxs)("p",{className:"text-muted",children:[null===e||void 0===e?void 0:e.following.length," following"]})]})]}),(0,j.jsxs)("div",{className:"action",children:[(0,j.jsx)(d.Z,{idTofollow:e._id,type:"suggestion"}),(0,j.jsx)("button",{className:" btn-new",children:"gretting"})]})]},n)}))}),(null===k||void 0===k?void 0:k.length)>3&&(0,j.jsx)("i",{className:"ri-arrow-drop-right-line",id:"right"})]}),(0,j.jsx)("div",{className:"hisPosts",children:F&&F.map((function(e,i){return(0,j.jsx)(m.default,{post:e,count:null===F||void 0===F?void 0:F.length,socket:n})}))})]}),(0,j.jsx)("div",{className:"leftProfile",children:i&&(0,j.jsx)(a.Z,{user:i})})]})})})}}}]);
//# sourceMappingURL=978.4781b505.chunk.js.map