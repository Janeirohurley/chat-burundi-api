"use strict";(self.webpackChunkupdate_chat_burundi=self.webpackChunkupdate_chat_burundi||[]).push([[682,169],{367:function(e,n,t){t(2791);var s=t(184);n.Z=function(e){return document.title="Chat Burundi - "+e.title,(0,s.jsx)("div",{className:"w-100",children:e.children})}},8169:function(e,n,t){t.r(n);var s=t(9439),i=t(1413),r=t(4165),o=t(5861),l=t(2791),a=t(1243),c=t(2010),d=t(9434),u=t(1896),f=t(4212),v=t(5194),h=t(6151),m=t(3543),x=t(3400),p=t(9658),g=t(184),j=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout(e,3e3)}));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),w=(0,l.lazy)((function(){return j(Promise.all([t.e(860),t.e(762),t.e(191),t.e(752)]).then(t.bind(t,5752)))})),Z=l.forwardRef((function(e,n){return(0,g.jsx)(p.Z,(0,i.Z)({elevation:6,ref:n,variant:"filled"},e))})),N=function(e){var n=e.socket,t=e.type,i=e.paramsId,p=(e.hisprofile,e.postId),j=(0,d.I0)(),N=(0,l.useState)(!0),b=(0,s.Z)(N,2),k=b[0],y=b[1],C=(0,l.useState)(5),L=(0,s.Z)(C,2),E=L[0],S=L[1],_=(0,l.useState)(),M=(0,s.Z)(_,2),A=M[0],I=M[1],T=(0,d.v9)((function(e){return e.posts})),q=(0,d.v9)((function(e){return e.Allpost})),O=(0,d.v9)((function(e){return e.userInfo})),P=(0,l.useState)(!1),G=(0,s.Z)(P,2),F=G[0],U=G[1],z=(0,l.useState)(!1),H=(0,s.Z)(z,2),D=H[0],R=H[1],X=function(){window.innerHeight+document.documentElement.scrollTop+1>document.scrollingElement.scrollHeight-50&&y(!0)},B=function(e,n){"clickaway"!==n&&R(!1)},J=(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(h.Z,{color:"secondary",size:"small",onClick:B,children:"UNDO"}),(0,g.jsx)(x.Z,{size:"small","aria-label":"close",color:"inherit",onClick:B})]});(0,l.useEffect)((function(){if(k){var e=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.Z)({method:"GET",url:f.L+"/api/post/",withCredentials:!0}).then((function(e){for(var n=e.data,t=(0,u.MN)(n,O.following,O._id).slice(0,E),s=0;s<t.length;s++)t[s].comments.reverse();j(c.J.fetchAllPosts(t)),y(!1),S((function(e){return e+5}))})).catch((function(e){U(e.message),y(!1),R(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[k]),(0,l.useEffect)((function(){return window.addEventListener("scroll",X),function(){return window.removeEventListener("scroll",X)}}),[]);var W=(0,l.useCallback)((function(){var e=q.filter((function(e){return e._id===p}));I(e)}),[q]);(0,l.useEffect)((function(){W(),console.log(A)}),[W]);var Y=(0,l.useCallback)((function(){y(!0),U(!1)}),[]);return(0,g.jsxs)("div",{className:i?"hisPosts":"feeds",children:["home"===t&&!(0,u.xb)(T[0])&&T.map((function(e,t){return(0,g.jsx)(l.Suspense,{fallback:(0,g.jsx)(v.Z,{},Math.random()),children:(0,g.jsx)(w,{post:e,count:E,socket:n},e._id)},t)})),"profile"===t&&!(0,u.xb)(T[0])&&T.map((function(e,t){return(0,g.jsx)(l.Suspense,{fallback:(0,g.jsx)(v.Z,{},Math.random()),children:e.posterId===O._id&&(0,g.jsx)(w,{post:e,count:E,socket:n},Math.random())},t)})),"hisprofile"===t&&i&&!(0,u.xb)(T[0])&&T.map((function(e,t){return(0,g.jsx)(l.Suspense,{fallback:(0,g.jsx)(v.Z,{},Math.random()),children:e.posterId===i&&(0,g.jsx)(w,{post:e,count:E,socket:n},Math.random())},t)})),"single"===t&&!(0,u.xb)(q[0])&&p&&q.map((function(e,s){return(0,g.jsx)(l.Suspense,{fallback:(0,g.jsx)(v.Z,{},Math.random()),children:e._id===p&&(0,g.jsx)(w,{post:e,count:1,socket:n,single:t},Math.random())},s)})),F&&(0,g.jsx)("div",{style:{cursor:"pointer"},onClick:Y,className:"cardCanvas",children:F}),k&&(0,g.jsx)(v.Z,{}),(0,g.jsx)(m.Z,{open:D,autoHideDuration:6e3,onClose:B,action:J,children:(0,g.jsx)(Z,{onClose:B,severity:"error",sx:{width:"100%"},children:"CONNECTION WAS LOST"})})]})};n.default=(0,l.memo)(N)},3821:function(e,n,t){var s=t(9439),i=t(2791),r=t(9434),o=t(7689),l=t(1087),a=t(1896),c=t(6587),d=t(3044),u=t(619),f=t(184),v=(0,i.memo)((function(){var e=(0,r.v9)((function(e){return e.getusers})),n=(0,r.v9)((function(e){return e.userInfo})),t=(0,i.useState)(!0),v=(0,s.Z)(t,2),h=v[0],m=v[1],x=(0,i.useState)(!0),p=(0,s.Z)(x,2),g=p[0],j=p[1],w=(0,i.useState)([]),Z=(0,s.Z)(w,2),N=Z[0],b=Z[1],k=(0,i.useState)([]),y=(0,s.Z)(k,2),C=y[0],L=y[1],E=(0,r.v9)((function(e){return e.AllChat})),S=(0,r.v9)((function(e){return e.OnlineUsers})),_=(0,o.s0)(),M=(0,i.useContext)(u.p).updatecurrentChat;(0,i.useEffect)((function(){if(!(0,a.xb)(E[0])){var e=E.filter((function(e){return e.latestMessage})),n=Object.keys(e).map((function(n){return e[n]})).sort((function(e,n){var t,s;return(null===(t=n.latestMessage)||void 0===t?void 0:t.createdAt)-(null===(s=e.latestMessage)||void 0===s?void 0:s.createdAt)}));n.length=3,L(n)}}),[E]),(0,i.useEffect)((function(){!g||(0,a.xb)(e[0])||(0,a.xb)(n._id)||(!function(){for(var t=[],s=0;s<e.length;s++)e[s]===n._id||e[s].followers.includes(n._id)||t.push(e[s]._id);t.sort((function(){return.5-Math.random()})),window.innerHeight>70&&(t.length=5),b(t)}(),m(!1),j(!1))}),[e,n,g]);return(0,i.useEffect)((function(){var e=null===E||void 0===E?void 0:E.filter((function(e){var t;return null===e||void 0===e||null===(t=e.users)||void 0===t?void 0:t.includes(null===n||void 0===n?void 0:n._id)}));console.log(e)}),[]),(0,f.jsx)("div",{children:(0,f.jsxs)("div",{className:"right",children:[(0,f.jsx)(f.Fragment,{children:C&&(0,f.jsx)("div",{className:"messages",children:(0,f.jsxs)("div",{className:"single-chat",children:[(0,f.jsx)("div",{className:"heading",children:(0,f.jsx)("h4",{children:"Latest Messages"})}),C&&C.map((function(e){var t,s,i,r,o;return(0,f.jsxs)("div",{className:"message",onClick:function(){return function(e){_("/messenger"),M(e)}(e)},children:[(0,f.jsxs)("div",{className:"profile-picture",children:[(0,f.jsx)(d.Z,{src:null===(t=e.latestMessage)||void 0===t?void 0:t.sender.picture,alt:"aa"}),(0,f.jsx)("div",{className:(0,a.Gg)(null===(s=e.latestMessage)||void 0===s?void 0:s.sender._id,S)?"active":""})]}),(0,f.jsxs)("div",{className:"messge-body",children:[(0,f.jsx)("h5",{children:(null===(i=e.latestMessage)||void 0===i?void 0:i.sender.pseudo)===n.pseudo?"You":null===(r=e.latestMessage)||void 0===r?void 0:r.sender.pseudo}),(0,f.jsxs)("p",{className:"text-muted",children:[(0,a.F8)(null===(o=e.latestMessage)||void 0===o?void 0:o.message)," "]})]})]},e._id)}))]})})}),(0,i.useMemo)((function(){return(0,f.jsxs)("div",{className:"freind-requests",children:[(0,f.jsx)("h4",{children:"Suggestions"}),h?(0,f.jsx)("div",{className:"feed",children:"Loading....."}):(0,f.jsxs)(f.Fragment,{children:[N&&N.map((function(t){for(var s=0;s<e.length;s++)if(t===e[s]._id&&t!==n._id)return(0,f.jsxs)("div",{className:"request",children:[(0,f.jsxs)("div",{className:"info",children:[(0,f.jsx)("div",{className:"profile-picture",children:(0,f.jsx)(d.Z,{src:e[s].picture,alt:"aa"})}),(0,f.jsxs)("div",{children:[(0,f.jsx)(l.rU,{className:"linkProfile",to:"/profile/".concat(e[s]._id),children:(0,f.jsx)("h5",{className:"noum",children:e[s].pseudo})}),(0,f.jsxs)("p",{className:"text-muted",children:[e[s].following.length," following"]})]})]}),(0,f.jsxs)("div",{className:"action",children:[(0,f.jsx)(c.Z,{idTofollow:t,type:"suggestion"}),(0,f.jsx)("button",{className:" btn-new",children:"gretting"})]})]},Math.random())})),(0,f.jsx)("div",{className:"request",children:(0,f.jsx)("div",{className:"profile-picture-ab",children:"For Looking others......"})})]})]})}),[N,e,h,n._id])]})})}));n.Z=v},5194:function(e,n,t){t.d(n,{Z:function(){return o}});t(2791);var s=t(7047),i=t(1582),r=t(184);function o(){return(0,r.jsxs)(i.Z,{spacing:1,sx:{backgroundColor:"var(--color-white)",margin:"1rem 0rem",padding:"1.1rem",borderRadius:"10px"},children:[(0,r.jsx)(s.Z,{variant:"circular",width:40,height:40,sx:{backgroundColor:"var(--color-light)"}}),(0,r.jsx)(s.Z,{variant:"text",sx:{fontSize:"1rem",backgroundColor:"var(--color-light)"}}),(0,r.jsx)(s.Z,{variant:"rectangular",width:"100%",height:200,sx:{backgroundColor:"var(--color-light)"}}),(0,r.jsx)(s.Z,{variant:"rounded",width:"100%",height:60,sx:{backgroundColor:"var(--color-light)"}})]})}},3682:function(e,n,t){t.r(n);var s=t(4165),i=t(5861),r=t(9439),o=t(2791),l=t(367),a=t(3821),c=t(7689),d=t(1087),u=t(6587),f=t(8169),v=t(1896),h=t(3044),m=t(9445),x=t(9453),p=t(4212),g=t(1697),j=t(1243),w=t(9434),Z=(t(5752),t(184));n.default=function(e){var n=e.socket,t=(0,w.v9)((function(e){return e.userInfo})),N=(0,w.v9)((function(e){return e.getusers})),b=(0,w.v9)((function(e){return e.Allpost})),k=(0,o.useState)(),y=(0,r.Z)(k,2),C=y[0],L=y[1],E=(0,o.useState)(),S=(0,r.Z)(E,2),_=S[0],M=S[1],A=(0,o.useState)(),I=(0,r.Z)(A,2),T=I[0],q=I[1],O=(0,o.useState)(),P=(0,r.Z)(O,2),G=P[0],F=P[1],U=(0,w.I0)(),z=(0,c.s0)(),H=(0,c.UO)(),D=(0,o.useContext)(g.i);H.id===D&&z("/profile/me"),(0,o.useEffect)((function(){if((null===C||void 0===C?void 0:C.length)>0){var e=document.querySelector(".carousel");document.querySelectorAll(".himfollowers i").forEach((function(n){n.addEventListener("click",(function(n){console.log(n.target.id),"left"===n.target.id?e.scrollLeft-=10:e.scrollLeft+=10}))}));var n,t,s=!1;e.addEventListener("mousedown",(function(i){s=!0,e.classList.add("dragging"),n=i.pageX,t=e.scrollLeft})),e.addEventListener("mousemove",(function(i){s&&(e.scrollLeft=t-(i.pageX-n))})),document.addEventListener("mouseup",(function(){s=!1,e.classList.remove("dragging")}))}}),[null===C||void 0===C?void 0:C.length]),(0,o.useEffect)((function(){if(H.id){var e=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H.id){e.next=3;break}return e.next=3,(0,j.Z)({method:"get",url:"".concat(p.L,"/api/user/").concat(H.id),withCredentials:!0}).then((function(e){var n=e.data;F(n)})).catch((function(){return console.log("no data found")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}var n=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H.id){e.next=3;break}return e.next=3,(0,j.Z)({method:"get",url:"".concat(p.L,"/api/user"),withCredentials:!0}).then((function(e){U(x.O.GetuAllsers(e.data))})).catch((function(){return U(x.O.GetuAllsers({message:"no user exist now"}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n();var t=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H.id){e.next=3;break}return e.next=3,(0,j.Z)({method:"get",url:"".concat(p.L,"/api/post"),withCredentials:!0}).then((function(e){var n=e.data;U(m.s.GetAll(n)),console.log("fetch again from profile outher ")})).catch((function(){return U(m.s.GetAll({message:"no post exist now"}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t()}),[H.id]),(0,o.useEffect)((function(){if((H.id||b)&&!(0,v.xb)(N)){var e=null===N||void 0===N?void 0:N.filter((function(e){return e.following.includes(H.id)}));console.log(e),L(e);var n=b.filter((function(e){return e.posterId===H.id}));q(n),console.log(n);for(var t=0,s=0;s<(null===T||void 0===T?void 0:T.length);s++)t+=T[s].likers.length;M(t)}}),[H.id,b]);var R=function(){var e=document.querySelector(".himfollowers");document.documentElement.scrollTop>550?setTimeout((function(){e.classList.add("popunder")}),100):setTimeout((function(){e.classList.remove("popunder")}),100)};return(0,o.useEffect)((function(){return window.addEventListener("scroll",R),function(){return window.removeEventListener("scroll",R)}}),[]),(0,Z.jsx)(l.Z,{title:null===G||void 0===G?void 0:G.pseudo,children:(0,Z.jsx)("div",{className:"container",children:(0,Z.jsxs)("div",{className:"wrapper",children:[(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,Z.jsxs)("div",{className:"profile",children:[(0,Z.jsx)("div",{className:"image",children:(0,Z.jsx)("img",{src:null===G||void 0===G?void 0:G.picture,alt:G&&(null===G||void 0===G?void 0:G._id)})}),(0,Z.jsxs)("div",{className:"wrapper-2",children:[(0,Z.jsx)("div",{style:{width:"9rem",height:"9rem",overflow:"hidden",borderRadius:"50%",position:"relative",top:"-70px",left:"20px",border:"6px solid var(--color-white)"},children:(0,Z.jsx)(h.Z,{style:{display:"absolute",top:"0",left:"0",width:"100%",height:"100%"},src:null===G||void 0===G?void 0:G.picture,alt:null===G||void 0===G?void 0:G.pseudo})}),(0,Z.jsxs)("div",{className:"infos",children:[(0,Z.jsx)("h4",{children:null===G||void 0===G?void 0:G.pseudo}),(0,Z.jsx)("span",{children:"\xc9tudiant(e) \xe0 univeriste polytechinique de gitega(UPG)"}),(0,Z.jsx)("small",{children:"kinyinya,ruyigi,burundi"}),(0,Z.jsxs)("div",{className:"followFollowing",children:[(0,Z.jsxs)("span",{children:[(0,v.xb)(null===G||void 0===G?void 0:G.followers.length)?"0":null===G||void 0===G?void 0:G.followers.length," followers"]}),(0,Z.jsxs)("span",{children:[(0,v.xb)(null===G||void 0===G?void 0:G.following.length)?"0":null===G||void 0===G?void 0:G.following.length," following"]}),(0,Z.jsxs)("span",{children:[(0,v.xb)(null===T||void 0===T?void 0:T.length)?"0":null===T||void 0===T?void 0:T.length," Posts"]}),(0,Z.jsxs)("span",{children:[_," Likes"]})]}),(0,Z.jsx)("span",{children:"la vie est plus bon que tu le pense mais aussi est plud dur que bon buy jeneiro hurley"}),(0,Z.jsxs)("div",{className:"action",children:[(0,Z.jsx)(u.Z,{idTofollow:H.id,type:"suggestion"})," ",(0,Z.jsx)("button",{className:" btn-new",children:"gretting"})]})]})]})]}),(null===C||void 0===C?void 0:C.length)>0&&(0,Z.jsxs)("div",{className:"himfollowers",children:[(null===C||void 0===C?void 0:C.length)>3&&(0,Z.jsx)("i",{className:"ri-arrow-drop-left-line",id:"left"}),(0,Z.jsx)("div",{className:"carousel",children:null===C||void 0===C?void 0:C.map((function(e,n){return(0,Z.jsxs)("div",{className:"request",children:[(0,Z.jsxs)("div",{className:"info",children:[(0,Z.jsx)("div",{className:"profile-picture",children:(0,Z.jsx)(h.Z,{src:null===e||void 0===e?void 0:e.picture,alt:"aa"})}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)(d.rU,{className:"linkProfile",to:"/profile/".concat(null===e||void 0===e?void 0:e._id),children:(0,Z.jsx)("h5",{className:"noum",children:null===e||void 0===e?void 0:e.pseudo})}),(0,Z.jsxs)("p",{className:"text-muted",children:[null===e||void 0===e?void 0:e.following.length," following"]})]})]}),(0,Z.jsxs)("div",{className:"action",children:[(0,Z.jsx)(u.Z,{idTofollow:e._id,type:"suggestion"}),(0,Z.jsx)("button",{className:" btn-new",children:"gretting"})]})]},n)}))}),(null===C||void 0===C?void 0:C.length)>3&&(0,Z.jsx)("i",{className:"ri-arrow-drop-right-line",id:"right"})]}),(0,Z.jsx)("div",{children:(0,Z.jsx)(f.default,{socket:n,type:"hisprofile",paramsId:H.id})})]}),(0,Z.jsx)("div",{className:"leftProfile",children:t&&(0,Z.jsx)(a.Z,{user:t})})]})})})}}}]);
//# sourceMappingURL=682.e1d38e7c.chunk.js.map