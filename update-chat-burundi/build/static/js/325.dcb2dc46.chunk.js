(self.webpackChunkupdate_chat_burundi=self.webpackChunkupdate_chat_burundi||[]).push([[325],{3738:function(e,i,s){var n={"./ar.json":2557,"./be.json":8367,"./cs.json":6037,"./de.json":4896,"./en.json":678,"./es.json":2378,"./fa.json":4057,"./fi.json":7453,"./fr.json":364,"./hi.json":7992,"./it.json":9438,"./ja.json":6847,"./kr.json":9983,"./nl.json":1936,"./pl.json":1902,"./pt.json":9761,"./ru.json":8656,"./sa.json":193,"./tr.json":7349,"./uk.json":3128,"./vi.json":1070,"./zh.json":7268};function l(e){var i=t(e);return s(i)}function t(e){if(!s.o(n,e)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return n[e]}l.keys=function(){return Object.keys(n)},l.resolve=t,e.exports=l,l.id=3738},367:function(e,i,s){"use strict";s(2791);var n=s(184);i.Z=function(e){return document.title="Chat Burundi - "+e.title,(0,n.jsx)("div",{className:"w-100",children:e.children})}},6904:function(e,i,s){"use strict";s.r(i),s.d(i,{default:function(){return _}});var n=s(9439),l=s(2791),t=s(8436),a=s(619),r=s(428),o=s(4165),c=s(5861),d=s(1243),u=s(4212),v=s(2090),h=s(2426),m=s.n(h),j=s(1896),x=s(184),f=function(e){var i,s,t,r=e.user,h=e.chat,f=e.notifications,p=e.markThisNotificationAsRead,g=e.currentChat,N=function(e,i){return{recipientUser:null===i||void 0===i?void 0:i.find((function(i){return i!==(null===e||void 0===e?void 0:e._id)}))}}(r,null===h||void 0===h?void 0:h.users),C=(N.recipientUser,(0,v.AG)(f)),k=null===C||void 0===C?void 0:C.filter((function(e){var i;return e.senderId===(null===(i=(0,j.kR)(null===r||void 0===r?void 0:r._id,null===h||void 0===h?void 0:h.users))||void 0===i?void 0:i._id)})),_=function(e){var i=(0,l.useContext)(a.p),s=i.newMessage,t=i.notifications,r=(0,l.useState)(null),v=(0,n.Z)(r,2),h=v[0],m=v[1];return(0,l.useEffect)((function(){var i=function(){var i=(0,c.Z)((0,o.Z)().mark((function i(){return(0,o.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,d.Z)({method:"get",url:"".concat(u.L,"/api/message/").concat(null===e||void 0===e?void 0:e._id),withCredentials:!0}).then((function(e){var i=e.data,s=i[(null===i||void 0===i?void 0:i.length)-1];m(s)})).catch((function(e){console.log(e)}));case 2:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}();i()}),[s,t]),{latestMessage:h}}(h),b=_.latestMessage;return(0,x.jsxs)("div",{className:(null===h||void 0===h?void 0:h._id)===(null===g||void 0===g?void 0:g._id)?"chat-box active":"chat-box",onClick:function(){0!==(null===k||void 0===k?void 0:k.length)&&p(k,f)},children:[(0,x.jsx)("div",{className:"img-box",children:(0,x.jsx)("img",{className:"img-cover",src:null===(i=(0,j.kR)(null===r||void 0===r?void 0:r._id,null===h||void 0===h?void 0:h.users))||void 0===i?void 0:i.picture,alt:Math.random()})}),(0,x.jsxs)("div",{className:"chat-details",children:[(0,x.jsxs)("div",{className:"text-head",children:[!(null!==h&&void 0!==h&&h.isGroupChat)&&(0,x.jsx)("h4",{children:null===(s=(0,j.kR)(null===r||void 0===r?void 0:r._id,null===h||void 0===h?void 0:h.users))||void 0===s?void 0:s.pseudo}),(null===h||void 0===h?void 0:h.isGroupChat)&&(0,x.jsx)("h4",{children:null===h||void 0===h?void 0:h.chatName}),(0,x.jsx)("p",{className:"time unread",children:m()(null===b||void 0===b?void 0:b.createdAt).calendar()})]}),(0,x.jsxs)("div",{className:"text-message",children:[(0,x.jsx)("p",{children:(t=null===b||void 0===b?void 0:b.message,(null===t||void 0===t?void 0:t.length)>20?"".concat(null===t||void 0===t?void 0:t.substr(0,10),"....."):t)}),(null===k||void 0===k?void 0:k.length)>0&&(0,x.jsx)("b",{children:(null===k||void 0===k?void 0:k.length)>0?k.length:""})]})]})]})},p=function(e){var i,s,n,t=e.currentChat,a=e.messages,r=e.user,o=e.isMessageLoading,c=e.onlineUsers,d=e.MediaMatch,u=e.updatecurrentChat;return(0,l.useEffect)((function(){if(a){var e,i=document.querySelectorAll(".message-box");null===(e=i[(null===i||void 0===i?void 0:i.length)-1])||void 0===e||e.scrollIntoView({behavior:"smooth"})}}),[a]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"header",children:[d&&(0,x.jsx)("i",{className:"ri-arrow-left-line",onClick:function(){return u(null)}}),(0,x.jsxs)("div",{className:"img-text",children:[(0,x.jsx)("div",{className:"user-img",children:(0,x.jsx)("img",{className:"dp",src:null===(i=(0,j.kR)(null===r||void 0===r?void 0:r._id,null===t||void 0===t?void 0:t.users))||void 0===i?void 0:i.picture,alt:"jjd"})}),(0,x.jsxs)("h4",{children:[null===(s=(0,j.kR)(null===r||void 0===r?void 0:r._id,null===t||void 0===t?void 0:t.users))||void 0===s?void 0:s.pseudo,(0,x.jsx)("br",{}),(0,x.jsx)("span",{children:(0,j.Gg)(null===(n=(0,j.kR)(null===r||void 0===r?void 0:r._id,null===t||void 0===t?void 0:t.users))||void 0===n?void 0:n._id,c)?"Online":"offline"})]})]}),(0,x.jsxs)("div",{className:"nav-icons",children:[(0,x.jsx)("i",{className:"ri-search-line"}),(0,x.jsx)("li",{children:(0,x.jsx)("i",{className:"fa-solid fa-ellipsis-vertical"})})]})]}),o&&(0,x.jsx)("p",{style:{textAlign:"center",width:"100%",justifyContent:"center",display:"flex",fontSize:"2rem",height:"100%"},children:"loading chats....."}),!o&&(0,x.jsx)("div",{className:"chat-container",children:a&&(null===a||void 0===a?void 0:a.map((function(e,i){var s;return(0,x.jsx)("div",{className:(null===e||void 0===e||null===(s=e.sender)||void 0===s?void 0:s._id)===(null===r||void 0===r?void 0:r._id)?"message-box my-message":"message-box friend-message",children:(0,x.jsxs)("p",{children:[null===e||void 0===e?void 0:e.message,(0,x.jsx)("br",{}),(0,x.jsx)("span",{children:m()(e.createdAt).calendar()})]})},i)})))})]})},g=s(3044),N=function(e){var i=e.potentielsChats,s=e.creatChat;return(0,l.useEffect)((function(){var e=document.querySelector(".carousel");document.querySelectorAll(".potentiel-chats i").forEach((function(i){i.addEventListener("click",(function(i){"left"===i.target.id?e.scrollLeft-=10:e.scrollLeft+=10}))}));var i,s,n=!1;e.addEventListener("mousedown",(function(l){n=!0,e.classList.add("dragging"),i=l.pageX,s=e.scrollLeft})),e.addEventListener("mousemove",(function(l){n&&(e.scrollLeft=s-(l.pageX-i))})),document.addEventListener("mouseup",(function(){n=!1,e.classList.remove("dragging")}))}),[]),(0,x.jsxs)("div",{className:"potentiel-chats",children:[(0,x.jsx)("i",{className:"ri-arrow-drop-right-line",id:"left"}),(0,x.jsx)("div",{className:"carousel mouving",children:null===i||void 0===i?void 0:i.map((function(e,i){return(0,x.jsx)(g.Z,{src:null===e||void 0===e?void 0:e.picture,alt:"heloo",name:"profile",className:"avatar",onClick:function(){return s(null===e||void 0===e?void 0:e._id)}},i)}))}),(0,x.jsx)("i",{className:"ri-arrow-drop-left-line",id:"right"})]})},C=s(367),k=s(724),_=function(e){e.socket;var i=(0,l.useContext)(a.p),s=i.userChats,o=(i.isUserChatsLoading,i.userChatsError,i.potentielsChats),c=i.creatChat,d=i.updatecurrentChat,u=i.currentChat,v=i.messages,h=i.isMessageLoading,m=i.sendTexMessage,j=i.onlineUsers,g=i.notifications,_=i.markThisNotificationAsRead,b=i.MediaMatch,w=(0,l.useContext)(t.V).user,y=(0,l.useState)(""),L=(0,n.Z)(y,2),M=L[0],A=L[1];return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(C.Z,{title:"messenger",children:(0,x.jsxs)("div",{className:"main-container",children:[b&&null===u&&(0,x.jsxs)("div",{className:"left-container",children:[(0,x.jsxs)("div",{className:"header",children:[(0,x.jsx)("div",{className:"user-img",children:(0,x.jsx)("img",{className:"dp",src:null===w||void 0===w?void 0:w.picture,alt:"heloo"})}),(0,x.jsxs)("div",{className:"nav-icons",children:[(0,x.jsx)("li",{children:(0,x.jsx)("i",{className:"ri-group-line"})}),(0,x.jsx)("li",{children:(0,x.jsx)("i",{className:"ri-chat-2-line"})}),(0,x.jsx)("li",{children:(0,x.jsx)("i",{className:"ri-more-2-fill"})})]})]}),(0,x.jsx)(N,{potentielsChats:o,creatChat:c}),(0,x.jsxs)("div",{className:"search-container",children:[(0,x.jsxs)("div",{className:"input",children:[(0,x.jsx)("i",{className:"ri-search-line"}),(0,x.jsx)("input",{type:"text",placeholder:"Search or start new chat   "})]}),(0,x.jsx)("i",{className:"ri-more-fill"})]}),(0,x.jsx)("div",{className:"chat-list",children:null===s||void 0===s?void 0:s.map((function(e,i){return(0,x.jsx)("div",{onClick:function(){return d(e)},children:(0,x.jsx)(f,{user:w,chat:e,notifications:g,markThisNotificationAsRead:_,currentChat:u})},i)}))})]}),!b&&(0,x.jsxs)("div",{className:"left-container",children:[(0,x.jsxs)("div",{className:"header",children:[(0,x.jsx)("div",{className:"user-img",children:(0,x.jsx)("img",{className:"dp",src:null===w||void 0===w?void 0:w.picture,alt:"heloo"})}),(0,x.jsxs)("div",{className:"nav-icons",children:[(0,x.jsx)("li",{children:(0,x.jsx)("i",{className:"ri-group-line"})}),(0,x.jsx)("li",{children:(0,x.jsx)("i",{className:"ri-chat-2-line"})}),(0,x.jsx)("li",{children:(0,x.jsx)("i",{className:"ri-more-2-fill"})})]})]}),(0,x.jsx)(N,{potentielsChats:o,creatChat:c}),(0,x.jsxs)("div",{className:"search-container",children:[(0,x.jsxs)("div",{className:"input",children:[(0,x.jsx)("i",{className:"ri-search-line"}),(0,x.jsx)("input",{type:"text",placeholder:"Search or start new chat   "})]}),(0,x.jsx)("i",{className:"ri-more-fill"})]}),(0,x.jsx)("div",{className:"chat-list",children:null===s||void 0===s?void 0:s.map((function(e,i){return(0,x.jsx)("div",{onClick:function(){return d(e)},children:(0,x.jsx)(f,{user:w,chat:e,notifications:g,markThisNotificationAsRead:_,currentChat:u})},i)}))})]}),(0,x.jsxs)("div",{className:"right-container",children:[!u&&(0,x.jsx)("p",{style:{textAlign:"center",width:"100%",justifyContent:"center",display:"flex",fontSize:"2rem",height:"100%"},children:"no conversation selected yet......"}),u&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(p,{user:w,currentChat:u,messages:v,isMessageLoading:h,onlineUsers:j,MediaMatch:b,updatecurrentChat:d}),(0,x.jsxs)("div",{className:"chatbox-input",children:[(0,x.jsx)("i",{className:"ri-attachment-2"}),(0,x.jsx)("i",{className:"ri-mic-line"}),(0,x.jsx)(k.Z,{value:M,onChange:A,fontFamily:"nonito"}),(0,x.jsx)(r.Z,{onClick:function(){return m(M,u,A)},children:"send"})]})]})]})]})})})}}}]);
//# sourceMappingURL=325.dcb2dc46.chunk.js.map