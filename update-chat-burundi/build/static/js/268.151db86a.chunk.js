"use strict";(self.webpackChunkupdate_chat_burundi=self.webpackChunkupdate_chat_burundi||[]).push([[268],{367:function(e,n,t){t(2791);var s=t(184);n.Z=function(e){return document.title="Chat Burundi - "+e.title,(0,s.jsx)("div",{className:"w-100",children:e.children})}},7605:function(e,n,t){var s=t(4165),i=t(5861),r=t(3433),c=t(9439),o=t(2791),a=t(1087),l=t(9434),u=t(2010),d=t(4212),h=t(1697),f=t(3044),m=t(1243),x=t(1896),p=t(1271),g=t(184);n.Z=function(e){var n=e.user,t=e.setcustomizeTheme,v=e.socket,j=(0,o.useState)([]),N=(0,c.Z)(j,2),w=N[0],Z=N[1],b=(0,o.useState)(!1),k=(0,c.Z)(b,2),C=k[0],_=k[1],S=(0,o.useState)(5),y=(0,c.Z)(S,2),M=y[0],E=y[1],L=(0,l.v9)((function(e){return e.getusers})),U=(0,o.useState)([]),F=(0,c.Z)(U,2),I=F[0],T=F[1],A=(0,o.useContext)(h.i),P=(0,l.I0)();(0,o.useEffect)((function(){null===v||void 0===v||v.on("getNotification",(function(e){A&&(0,m.Z)({method:"get",url:"".concat(d.L,"/api/user/").concat(A),withCredentials:!0}).then((function(e){var n=e.data.notifications.filter((function(e){return"pending"===e.status&&e.notifieId!==A}));Z(n)})).catch((function(e){return console.log(e)}))}))}),[v,A,L]),(0,o.useEffect)((function(){null===v||void 0===v||v.on("getNewpost",(function(e){T((function(n){return[].concat((0,r.Z)(n),[e])}))}))}),[v]),(0,o.useEffect)((function(){C&&A&&(Z([]),(0,m.Z)({method:"get",url:"".concat(d.L,"/api/user/notification/").concat(A),withCredentials:!0}).then((function(e){e.data})).catch((function(e){return console.log(e)}))),P(p.N.open(C))}),[C,P,A]),(0,o.useEffect)((function(){A&&(0,m.Z)({method:"get",url:"".concat(d.L,"/api/user/").concat(A),withCredentials:!0}).then((function(e){var n=e.data.notifications.filter((function(e){return"pending"===e.status&&e.notifieId!==A}));Z(n)})).catch((function(e){return console.log(e)}))}),[A]);var H=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.Z)({method:"GET",url:d.L+"/api/post/",withCredentials:!0}).then((function(e){var n=e.data.slice(0,M);P(u.J.fetchAllPosts(n)),console.log("fetch again from leftbar"),E(M+5),T([])})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,g.jsx)("div",{children:(0,g.jsxs)("div",{className:"left",children:[(0,g.jsxs)(a.rU,{to:"/profile",className:"profile",children:[(0,g.jsx)("div",{className:"profile-picture",children:(0,g.jsx)(f.Z,{src:n.picture,alt:"profile1",srcSet:""})}),(0,g.jsxs)("div",{className:"handle",children:[(0,g.jsx)("h4",{children:n.pseudo}),(0,g.jsxs)("p",{className:"text-muted",children:["$",n.pseudo]})]})]}),(0,g.jsxs)("div",{className:"sidebar",children:[(0,g.jsxs)(a.rU,{to:"/",className:"menu-item active",children:[(0,g.jsx)("span",{children:(0,g.jsx)("i",{onClick:function(){return H()},className:"ri-home-2-line",children:(0,g.jsx)("small",{className:I&&0!==I.length?"notifications-count":"",children:I&&0!==I.length?I.length:""})})})," ",(0,g.jsx)("h3",{children:"Home"})]}),(0,g.jsxs)(a.rU,{to:"/messenger",className:"menu-item",id:"messeges-notification",children:[(0,g.jsx)("span",{children:(0,g.jsx)("i",{className:"ri-mail-line",children:(0,g.jsx)("small",{className:"notifications-coun"})})})," ",(0,g.jsx)("h3",{children:"Messages"})]}),(0,g.jsxs)(a.rU,{to:"#",className:"menu-item",id:"notifications",children:[(0,g.jsx)("span",{children:(0,g.jsx)("i",{onClick:function(){return _((function(e){return!e}))},className:"ri-notification-3-line",children:(0,g.jsx)("small",{className:0!==w.length?"notifications-count":"",children:0!==w.length&&(w.length>9?"9+":w.length)})})}),(0,g.jsx)("h3",{children:"Notificatios"})]}),(0,g.jsxs)(a.rU,{to:"#",className:"menu-item",children:[(0,g.jsx)("span",{children:(0,g.jsx)("i",{className:" ri-bookmark-3-line",children:(0,g.jsx)("small",{className:(0,x.xb)(n.saved)?void 0:"notifications-count",children:!(0,x.xb)(n.saved)&&(n.saved.length>9?"9+":n.saved.length)})})})," ",(0,g.jsx)("h3",{children:"Bookmarks"})]}),(0,g.jsxs)(a.rU,{to:"#",className:"menu-item",children:[(0,g.jsx)("span",{children:(0,g.jsx)("i",{className:"ri-bar-chart-grouped-line"})})," ",(0,g.jsx)("h3",{children:"Analystics"})]}),(0,g.jsxs)(a.rU,{to:"#",className:"menu-item",onClick:function(){return t(!0)},children:[(0,g.jsx)("span",{children:(0,g.jsx)("i",{className:"ri-palette-line"})})," ",(0,g.jsx)("h3",{children:"Theme"})]}),(0,g.jsxs)(a.rU,{to:"#",className:"menu-item",children:[(0,g.jsx)("span",{children:(0,g.jsx)("i",{className:"ri-settings-3-line"})})," ",(0,g.jsx)("h3",{children:"Settings"})]})]}),(0,g.jsx)("label",{htmlFor:"create-post",className:"btn btn-primary",children:"Create post"})]})})}},8169:function(e,n,t){var s=t(9439),i=t(4165),r=t(5861),c=t(2791),o=t(1243),a=t(2010),l=t(9434),u=t(1896),d=t(4212),h=t(5194),f=t(184),m=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout(e,3e3)}));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=(0,c.lazy)((function(){return m(Promise.all([t.e(982),t.e(463),t.e(487),t.e(776),t.e(436),t.e(429),t.e(752)]).then(t.bind(t,5752)))}));n.Z=function(e){var n=e.socket,t=e.type,m=(0,l.I0)(),p=(0,c.useState)(!0),g=(0,s.Z)(p,2),v=g[0],j=g[1],N=(0,c.useState)(5),w=(0,s.Z)(N,2),Z=w[0],b=w[1],k=(0,l.v9)((function(e){return e.posts})),C=(0,l.v9)((function(e){return e.userInfo})),_=function(){window.innerHeight+document.documentElement.scrollTop+1>document.scrollingElement.scrollHeight-50&&j(!0)};return(0,c.useEffect)((function(){if(v||t){var e=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Z)({method:"GET",url:d.L+"/api/post/",withCredentials:!0}).then((function(e){var n=e.data;console.log("fetch again from posts");for(var t=(0,u.MN)(n,C.following,C._id).slice(0,Z),s=0;s<t.length;s++)t[s].comments.reverse();m(a.J.fetchAllPosts(t)),j(!1),b((function(e){return e+5}))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}return window.addEventListener("scroll",_),function(){return window.removeEventListener("scroll",_)}}),[v,t]),(0,f.jsxs)("div",{className:"feeds",children:["home"===t&&!(0,u.xb)(k[0])&&k.map((function(e){return(0,f.jsx)(c.Suspense,{fallback:(0,f.jsx)(h.Z,{},Math.random()),children:(0,f.jsx)(x,{post:e,count:Z,socket:n},e._id)})})),"profile"===t&&!(0,u.xb)(k[0])&&k.map((function(e){return(0,f.jsx)(c.Suspense,{fallback:(0,f.jsx)(h.Z,{},Math.random()),children:e.posterId===C._id&&(0,f.jsx)(x,{post:e,count:Z,socket:n},e._id)})}))]})}},3821:function(e,n,t){var s=t(9439),i=t(2791),r=t(9434),c=t(7689),o=t(1087),a=t(1896),l=t(1933),u=t(6587),d=t(3044),h=t(184),f=(0,i.memo)((function(){var e=(0,r.v9)((function(e){return e.getusers})),n=(0,r.v9)((function(e){return e.userInfo})),t=(0,i.useState)(!0),f=(0,s.Z)(t,2),m=f[0],x=f[1],p=(0,i.useState)(!0),g=(0,s.Z)(p,2),v=g[0],j=g[1],N=(0,i.useState)([]),w=(0,s.Z)(N,2),Z=w[0],b=w[1],k=(0,i.useState)([]),C=(0,s.Z)(k,2),_=C[0],S=C[1],y=(0,r.v9)((function(e){return e.AllChat})),M=(0,r.v9)((function(e){return e.OnlineUsers})),E=(0,l.g)().setSelectedChat,L=(0,c.s0)();(0,i.useEffect)((function(){if(!(0,a.xb)(y[0])){var e=y.filter((function(e){return e.latestMessage})),n=Object.keys(e).map((function(n){return e[n]})).sort((function(e,n){var t,s;return(null===(t=n.latestMessage)||void 0===t?void 0:t.createdAt)-(null===(s=e.latestMessage)||void 0===s?void 0:s.createdAt)}));n.length=3,S(n)}}),[y]),(0,i.useEffect)((function(){!v||(0,a.xb)(e[0])||(0,a.xb)(n._id)||(!function(){for(var t=[],s=0;s<e.length;s++)e[s]===n._id||e[s].followers.includes(n._id)||t.push(e[s]._id);t.sort((function(){return.5-Math.random()})),window.innerHeight>70&&(t.length=5),b(t)}(),x(!1),j(!1))}),[e,n,v]);return(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:"right",children:[(0,h.jsxs)("div",{className:"messages",children:[(0,h.jsx)("div",{className:"heading",children:(0,h.jsx)("h4",{children:"Latest Messages"})}),_&&_.map((function(e){var t,s,i,r,c;return(0,h.jsxs)("div",{className:"message",onClick:function(){return function(e){E(e),L("/messenger")}(e)},children:[(0,h.jsxs)("div",{className:"profile-picture",children:[(0,h.jsx)(d.Z,{src:null===(t=e.latestMessage)||void 0===t?void 0:t.sender.picture,alt:"aa"}),(0,h.jsx)("div",{className:(0,a.Gg)(null===(s=e.latestMessage)||void 0===s?void 0:s.sender._id,M)?"active":""})]}),(0,h.jsxs)("div",{className:"messge-body",children:[(0,h.jsx)("h5",{children:(null===(i=e.latestMessage)||void 0===i?void 0:i.sender.pseudo)===n.pseudo?"You":null===(r=e.latestMessage)||void 0===r?void 0:r.sender.pseudo}),(0,h.jsxs)("p",{className:"text-muted",children:[(0,a.F8)(null===(c=e.latestMessage)||void 0===c?void 0:c.message)," "]})]})]},e._id)}))]}),(0,i.useMemo)((function(){return(0,h.jsxs)("div",{className:"freind-requests",children:[(0,h.jsx)("h4",{children:"Suggestions"}),m?(0,h.jsx)("div",{className:"feed",children:"Loading....."}):(0,h.jsxs)(h.Fragment,{children:[Z&&Z.map((function(t){for(var s=0;s<e.length;s++)if(t===e[s]._id&&t!==n._id)return(0,h.jsxs)("div",{className:"request",children:[(0,h.jsxs)("div",{className:"info",children:[(0,h.jsx)("div",{className:"profile-picture",children:(0,h.jsx)(d.Z,{src:e[s].picture,alt:"aa"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)(o.rU,{className:"linkProfile",to:"/profile/".concat(e[s]._id),children:(0,h.jsx)("h5",{className:"noum",children:e[s].pseudo})}),(0,h.jsxs)("p",{className:"text-muted",children:[e[s].following.length," following"]})]})]}),(0,h.jsxs)("div",{className:"action",children:[(0,h.jsx)(u.Z,{idTofollow:t,type:"suggestion"}),(0,h.jsx)("button",{className:" btn-new",children:"gretting"})]})]},Math.random())})),(0,h.jsx)("div",{className:"request",children:(0,h.jsx)("div",{className:"profile-picture-ab",children:"For Looking others......"})})]})]})}),[Z,e,m,n._id])]})})}));n.Z=f},5194:function(e,n,t){t.d(n,{Z:function(){return c}});t(2791);var s=t(7047),i=t(1582),r=t(184);function c(){return(0,r.jsxs)(i.Z,{spacing:1,sx:{backgroundColor:"var(--color-white)",margin:"1rem 0rem",padding:"1.1rem",borderRadius:"10px"},children:[(0,r.jsx)(s.Z,{variant:"circular",width:40,height:40,sx:{backgroundColor:"var(--color-light)"}}),(0,r.jsx)(s.Z,{variant:"text",sx:{fontSize:"1rem",backgroundColor:"var(--color-light)"}}),(0,r.jsx)(s.Z,{variant:"rectangular",width:"100%",height:200,sx:{backgroundColor:"var(--color-light)"}}),(0,r.jsx)(s.Z,{variant:"rounded",width:"100%",height:60,sx:{backgroundColor:"var(--color-light)"}})]})}},6587:function(e,n,t){var s=t(4165),i=t(5861),r=t(9439),c=t(1243),o=t(2791),a=t(9434),l=t(7498),u=t(1896),d=t(4212),h=t(184);n.Z=function(e){var n=e.idTofollow,t=e.type,f=e.socket,m=(0,o.useState)(!1),x=(0,r.Z)(m,2),p=x[0],g=x[1],v=(0,a.I0)(),j=(0,a.v9)((function(e){return e.userInfo})),N=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(n,t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,(0,c.Z)({method:"patch",url:"".concat(d.L,"/api/user/follow/").concat(n),withCredentials:!0,data:{idToFollow:t}}).then((function(e){v(l.Z.Follow(t)),(0,c.Z)({method:"patch",url:"".concat(d.L,"/api/post/notification/").concat(t),data:{notifieId:j._id,notifiePseudo:j.pseudo,notification:"start following  u",status:"pending",pictureNotifie:j.picture},withCredentials:!0}).then((function(e){console.log(e),f.emit("sendNotification",{senderName:j._id,resverName:t,timeNot:new Date})})).catch((function(e){return console.log(e)}))})).catch((function(e){console.log(e.message)}));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),w=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t,i){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!1),e.next=3,(0,c.Z)({method:"patch",url:"".concat(d.L,"/api/user/unfollow/").concat(t),withCredentials:!0,data:{idToUnFollow:i}}).then((function(e){v(l.Z.UnFollow(n))})).catch((function(e){console.log(e.message)}));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){(0,u.xb)(j.following)||(j.following.includes(n)?g(!0):g(!1))}),[j,n]),(0,h.jsxs)(h.Fragment,{children:[!0===p&&(0,h.jsxs)("span",{onClick:function(){return w(j._id,n)},children:["suggestion"===t&&(0,h.jsx)("button",{className:"btn btn-primary",children:"UnFollow"}),"card"===t&&(0,h.jsx)("i",{className:"ri-checkbox-circle-fill"})]}),!1===p&&n!==j._id&&(0,h.jsxs)("span",{onClick:function(){return N(j._id,n)},children:["suggestion"===t&&(0,h.jsx)("button",{className:"btn btn-primary",children:"follow"}),"card"===t&&(0,h.jsx)("i",{className:"ri-checkbox-circle-line"})]}),!1===p&&n===j._id&&(0,h.jsxs)("span",{children:["suggestion"===t&&(0,h.jsx)("button",{className:"btn btn-primary disableButton",children:"follow"}),"card"===t&&(0,h.jsx)("i",{className:"ri-checkbox-circle-line"})]})]})}}}]);
//# sourceMappingURL=268.151db86a.chunk.js.map