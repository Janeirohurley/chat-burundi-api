"use strict";(self.webpackChunkupdate_chat_burundi=self.webpackChunkupdate_chat_burundi||[]).push([[682],{367:function(e,n,t){t(2791);var i=t(184);n.Z=function(e){return document.title="Chat Burundi - "+e.title,(0,i.jsx)("div",{className:"w-100",children:e.children})}},8169:function(e,n,t){var i=t(9439),s=t(4165),r=t(5861),o=t(2791),l=t(1243),c=t(2010),a=t(9434),u=t(1896),d=t(4212),f=t(5194),h=t(184),v=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout(e,3e3)}));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),p=(0,o.lazy)((function(){return v(Promise.all([t.e(463),t.e(79),t.e(815),t.e(102),t.e(263),t.e(429),t.e(752)]).then(t.bind(t,5752)))}));n.Z=function(e){var n=e.socket,t=e.type,v=e.paramsId,x=(e.hisprofile,(0,a.I0)()),m=(0,o.useState)(!0),g=(0,i.Z)(m,2),j=g[0],w=g[1],Z=(0,o.useState)(5),b=(0,i.Z)(Z,2),N=b[0],k=b[1],y=(0,a.v9)((function(e){return e.posts})),_=(0,a.v9)((function(e){return e.userInfo})),L=function(){window.innerHeight+document.documentElement.scrollTop+1>document.scrollingElement.scrollHeight-50&&w(!0)};return(0,o.useEffect)((function(){if(j){var e=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.Z)({method:"GET",url:d.L+"/api/post/",withCredentials:!0}).then((function(e){var n=e.data;console.log("fetch again from posts");for(var t=(0,u.MN)(n,_.following,_._id).slice(0,N),i=0;i<t.length;i++)t[i].comments.reverse();x(c.J.fetchAllPosts(t)),w(!1),k((function(e){return e+5}))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[j]),(0,o.useEffect)((function(){return window.addEventListener("scroll",L),function(){return window.removeEventListener("scroll",L)}}),[]),(0,h.jsxs)("div",{className:v?"hisPosts":"feeds",children:["home"===t&&!(0,u.xb)(y[0])&&y.map((function(e){return(0,h.jsx)(o.Suspense,{fallback:(0,h.jsx)(f.Z,{},Math.random()),children:(0,h.jsx)(p,{post:e,count:N,socket:n},e._id)})})),"profile"===t&&!(0,u.xb)(y[0])&&y.map((function(e){return(0,h.jsx)(o.Suspense,{fallback:(0,h.jsx)(f.Z,{},Math.random()),children:e.posterId===_._id&&(0,h.jsx)(p,{post:e,count:N,socket:n},e._id)})})),"hisprofile"===t&&v&&!(0,u.xb)(y[0])&&y.map((function(e){return(0,h.jsx)(o.Suspense,{fallback:(0,h.jsx)(f.Z,{},Math.random()),children:e.posterId===v&&(0,h.jsx)(p,{post:e,count:N,socket:n},e._id)})}))]})}},3821:function(e,n,t){var i=t(9439),s=t(2791),r=t(9434),o=t(7689),l=t(1087),c=t(1896),a=t(6587),u=t(3044),d=t(184),f=(0,s.memo)((function(){var e=(0,r.v9)((function(e){return e.getusers})),n=(0,r.v9)((function(e){return e.userInfo})),t=(0,s.useState)(!0),f=(0,i.Z)(t,2),h=f[0],v=f[1],p=(0,s.useState)(!0),x=(0,i.Z)(p,2),m=x[0],g=x[1],j=(0,s.useState)([]),w=(0,i.Z)(j,2),Z=w[0],b=w[1],N=(0,s.useState)([]),k=(0,i.Z)(N,2),y=k[0],_=k[1],L=(0,r.v9)((function(e){return e.AllChat})),C=(0,r.v9)((function(e){return e.OnlineUsers}));(0,o.s0)();return(0,s.useEffect)((function(){if(!(0,c.xb)(L[0])){var e=L.filter((function(e){return e.latestMessage})),n=Object.keys(e).map((function(n){return e[n]})).sort((function(e,n){var t,i;return(null===(t=n.latestMessage)||void 0===t?void 0:t.createdAt)-(null===(i=e.latestMessage)||void 0===i?void 0:i.createdAt)}));n.length=3,_(n)}}),[L]),(0,s.useEffect)((function(){!m||(0,c.xb)(e[0])||(0,c.xb)(n._id)||(!function(){for(var t=[],i=0;i<e.length;i++)e[i]===n._id||e[i].followers.includes(n._id)||t.push(e[i]._id);t.sort((function(){return.5-Math.random()})),window.innerHeight>70&&(t.length=5),b(t)}(),v(!1),g(!1))}),[e,n,m]),(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:"right",children:[(0,d.jsx)(d.Fragment,{children:y&&(0,d.jsxs)("div",{className:"messages",children:[(0,d.jsx)("div",{className:"heading",children:(0,d.jsx)("h4",{children:"Latest Messages"})}),y&&y.map((function(e){var t,i,s,r,o;return(0,d.jsxs)("div",{className:"message",onClick:function(){return alert("helo this is a chat")},children:[(0,d.jsxs)("div",{className:"profile-picture",children:[(0,d.jsx)(u.Z,{src:null===(t=e.latestMessage)||void 0===t?void 0:t.sender.picture,alt:"aa"}),(0,d.jsx)("div",{className:(0,c.Gg)(null===(i=e.latestMessage)||void 0===i?void 0:i.sender._id,C)?"active":""})]}),(0,d.jsxs)("div",{className:"messge-body",children:[(0,d.jsx)("h5",{children:(null===(s=e.latestMessage)||void 0===s?void 0:s.sender.pseudo)===n.pseudo?"You":null===(r=e.latestMessage)||void 0===r?void 0:r.sender.pseudo}),(0,d.jsxs)("p",{className:"text-muted",children:[(0,c.F8)(null===(o=e.latestMessage)||void 0===o?void 0:o.message)," "]})]})]},e._id)}))]})}),(0,s.useMemo)((function(){return(0,d.jsxs)("div",{className:"freind-requests",children:[(0,d.jsx)("h4",{children:"Suggestions"}),h?(0,d.jsx)("div",{className:"feed",children:"Loading....."}):(0,d.jsxs)(d.Fragment,{children:[Z&&Z.map((function(t){for(var i=0;i<e.length;i++)if(t===e[i]._id&&t!==n._id)return(0,d.jsxs)("div",{className:"request",children:[(0,d.jsxs)("div",{className:"info",children:[(0,d.jsx)("div",{className:"profile-picture",children:(0,d.jsx)(u.Z,{src:e[i].picture,alt:"aa"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.rU,{className:"linkProfile",to:"/profile/".concat(e[i]._id),children:(0,d.jsx)("h5",{className:"noum",children:e[i].pseudo})}),(0,d.jsxs)("p",{className:"text-muted",children:[e[i].following.length," following"]})]})]}),(0,d.jsxs)("div",{className:"action",children:[(0,d.jsx)(a.Z,{idTofollow:t,type:"suggestion"}),(0,d.jsx)("button",{className:" btn-new",children:"gretting"})]})]},Math.random())})),(0,d.jsx)("div",{className:"request",children:(0,d.jsx)("div",{className:"profile-picture-ab",children:"For Looking others......"})})]})]})}),[Z,e,h,n._id])]})})}));n.Z=f},5194:function(e,n,t){t.d(n,{Z:function(){return o}});t(2791);var i=t(7047),s=t(1582),r=t(184);function o(){return(0,r.jsxs)(s.Z,{spacing:1,sx:{backgroundColor:"var(--color-white)",margin:"1rem 0rem",padding:"1.1rem",borderRadius:"10px"},children:[(0,r.jsx)(i.Z,{variant:"circular",width:40,height:40,sx:{backgroundColor:"var(--color-light)"}}),(0,r.jsx)(i.Z,{variant:"text",sx:{fontSize:"1rem",backgroundColor:"var(--color-light)"}}),(0,r.jsx)(i.Z,{variant:"rectangular",width:"100%",height:200,sx:{backgroundColor:"var(--color-light)"}}),(0,r.jsx)(i.Z,{variant:"rounded",width:"100%",height:60,sx:{backgroundColor:"var(--color-light)"}})]})}},6587:function(e,n,t){var i=t(4165),s=t(5861),r=t(9439),o=t(1243),l=t(2791),c=t(9434),a=t(7498),u=t(1896),d=t(4212),f=t(184);n.Z=function(e){var n=e.idTofollow,t=e.type,h=e.socket,v=(0,l.useState)(!1),p=(0,r.Z)(v,2),x=p[0],m=p[1],g=(0,c.I0)(),j=(0,c.v9)((function(e){return e.userInfo})),w=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(n,t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,(0,o.Z)({method:"patch",url:"".concat(d.L,"/api/user/follow/").concat(n),withCredentials:!0,data:{idToFollow:t}}).then((function(e){g(a.Z.Follow(t)),(0,o.Z)({method:"patch",url:"".concat(d.L,"/api/post/notification/").concat(t),data:{notifieId:j._id,notifiePseudo:j.pseudo,notification:"start following  u",status:"pending",pictureNotifie:j.picture},withCredentials:!0}).then((function(e){console.log(e),h.emit("sendNotification",{senderName:j._id,resverName:t,timeNot:new Date})})).catch((function(e){return console.log(e)}))})).catch((function(e){console.log(e.message)}));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,s){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!1),e.next=3,(0,o.Z)({method:"patch",url:"".concat(d.L,"/api/user/unfollow/").concat(t),withCredentials:!0,data:{idToUnFollow:s}}).then((function(e){g(a.Z.UnFollow(n))})).catch((function(e){console.log(e.message)}));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){(0,u.xb)(j.following)||(j.following.includes(n)?m(!0):m(!1))}),[j,n]),(0,f.jsxs)(f.Fragment,{children:[!0===x&&(0,f.jsxs)("span",{onClick:function(){return Z(j._id,n)},children:["suggestion"===t&&(0,f.jsx)("button",{className:"btn btn-primary",children:"UnFollow"}),"card"===t&&(0,f.jsx)("i",{className:"ri-checkbox-circle-fill"})]}),!1===x&&n!==j._id&&(0,f.jsxs)("span",{onClick:function(){return w(j._id,n)},children:["suggestion"===t&&(0,f.jsx)("button",{className:"btn btn-primary",children:"follow"}),"card"===t&&(0,f.jsx)("i",{className:"ri-checkbox-circle-line"})]}),!1===x&&n===j._id&&(0,f.jsxs)("span",{children:["suggestion"===t&&(0,f.jsx)("button",{className:"btn btn-primary disableButton",children:"follow"}),"card"===t&&(0,f.jsx)("i",{className:"ri-checkbox-circle-line"})]})]})}},3682:function(e,n,t){t.r(n);var i=t(4165),s=t(5861),r=t(9439),o=t(2791),l=t(367),c=t(3821),a=t(7689),u=t(1087),d=t(6587),f=t(8169),h=t(1896),v=t(3044),p=t(9445),x=t(9453),m=t(4212),g=t(1697),j=t(1243),w=t(9434),Z=(t(5752),t(184));n.default=function(e){var n=e.socket,t=(0,w.v9)((function(e){return e.userInfo})),b=(0,w.v9)((function(e){return e.getusers})),N=(0,w.v9)((function(e){return e.Allpost})),k=(0,o.useState)(),y=(0,r.Z)(k,2),_=y[0],L=y[1],C=(0,o.useState)(),E=(0,r.Z)(C,2),S=E[0],M=E[1],I=(0,o.useState)(),F=(0,r.Z)(I,2),A=F[0],P=F[1],q=(0,o.useState)(),T=(0,r.Z)(q,2),U=T[0],G=T[1],O=(0,w.I0)(),H=(0,a.s0)(),z=(0,a.UO)(),B=(0,o.useContext)(g.i);return z.id===B&&H("/profile/me"),(0,o.useEffect)((function(){if((null===_||void 0===_?void 0:_.length)>0){var e=document.querySelector(".carousel");document.querySelectorAll(".himfollowers i").forEach((function(n){n.addEventListener("click",(function(n){console.log(n.target.id),"left"===n.target.id?e.scrollLeft-=10:e.scrollLeft+=10}))}));var n,t,i=!1;e.addEventListener("mousedown",(function(s){i=!0,e.classList.add("dragging"),n=s.pageX,t=e.scrollLeft})),e.addEventListener("mousemove",(function(s){i&&(e.scrollLeft=t-(s.pageX-n))})),document.addEventListener("mouseup",(function(){i=!1,e.classList.remove("dragging")}))}}),[null===_||void 0===_?void 0:_.length]),(0,o.useEffect)((function(){if(z.id){var e=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!z.id){e.next=3;break}return e.next=3,(0,j.Z)({method:"get",url:"".concat(m.L,"/api/user/").concat(z.id),withCredentials:!0}).then((function(e){var n=e.data;G(n)})).catch((function(){return console.log("no data found")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}var n=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!z.id){e.next=3;break}return e.next=3,(0,j.Z)({method:"get",url:"".concat(m.L,"/api/user"),withCredentials:!0}).then((function(e){O(x.O.GetuAllsers(e.data))})).catch((function(){return O(x.O.GetuAllsers({message:"no user exist now"}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n();var t=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!z.id){e.next=3;break}return e.next=3,(0,j.Z)({method:"get",url:"".concat(m.L,"/api/post"),withCredentials:!0}).then((function(e){var n=e.data;O(p.s.GetAll(n)),console.log("fetch again from profile outher ")})).catch((function(){return O(p.s.GetAll({message:"no post exist now"}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t()}),[z.id]),(0,o.useEffect)((function(){if((z.id||N)&&!(0,h.xb)(b)){var e=null===b||void 0===b?void 0:b.filter((function(e){return e.following.includes(z.id)}));console.log(e),L(e);var n=N.filter((function(e){return e.posterId===z.id}));P(n),console.log(n);for(var t=0,i=0;i<(null===A||void 0===A?void 0:A.length);i++)t+=A[i].likers.length;M(t)}}),[z.id,N]),(0,Z.jsx)(l.Z,{title:null===U||void 0===U?void 0:U.pseudo,children:(0,Z.jsx)("div",{className:"container",children:(0,Z.jsxs)("div",{className:"wrapper",children:[(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,Z.jsxs)("div",{className:"profile",children:[(0,Z.jsx)("div",{className:"image",children:(0,Z.jsx)("img",{src:null===U||void 0===U?void 0:U.picture,alt:U&&(null===U||void 0===U?void 0:U._id)})}),(0,Z.jsxs)("div",{className:"wrapper-2",children:[(0,Z.jsx)("div",{style:{width:"9rem",height:"9rem",overflow:"hidden",borderRadius:"50%",position:"relative",top:"-70px",left:"20px",border:"6px solid var(--color-white)"},children:(0,Z.jsx)(v.Z,{style:{display:"absolute",top:"0",left:"0",width:"100%",height:"100%"},src:null===U||void 0===U?void 0:U.picture,alt:null===U||void 0===U?void 0:U.pseudo})}),(0,Z.jsxs)("div",{className:"infos",children:[(0,Z.jsx)("h4",{children:null===U||void 0===U?void 0:U.pseudo}),(0,Z.jsx)("span",{children:"\xc9tudiant(e) \xe0 univeriste polytechinique de gitega(UPG)"}),(0,Z.jsx)("small",{children:"kinyinya,ruyigi,burundi"}),(0,Z.jsxs)("div",{className:"followFollowing",children:[(0,Z.jsxs)("span",{children:[(0,h.xb)(null===U||void 0===U?void 0:U.followers.length)?"0":null===U||void 0===U?void 0:U.followers.length," followers"]}),(0,Z.jsxs)("span",{children:[(0,h.xb)(null===U||void 0===U?void 0:U.following.length)?"0":null===U||void 0===U?void 0:U.following.length," following"]}),(0,Z.jsxs)("span",{children:[(0,h.xb)(null===A||void 0===A?void 0:A.length)?"0":null===A||void 0===A?void 0:A.length," Posts"]}),(0,Z.jsxs)("span",{children:[S," Likes"]})]}),(0,Z.jsx)("span",{children:"la vie est plus bon que tu le pense mais aussi est plud dur que bon buy jeneiro hurley"}),(0,Z.jsxs)("div",{className:"action",children:[(0,Z.jsx)(d.Z,{idTofollow:z.id,type:"suggestion"})," ",(0,Z.jsx)("button",{className:" btn-new",children:"gretting"})]})]})]})]}),(null===_||void 0===_?void 0:_.length)>0&&(0,Z.jsxs)("div",{className:"himfollowers",children:[(null===_||void 0===_?void 0:_.length)>3&&(0,Z.jsx)("i",{className:"ri-arrow-drop-left-line",id:"left"}),(0,Z.jsx)("div",{className:"carousel",children:null===_||void 0===_?void 0:_.map((function(e,n){return(0,Z.jsxs)("div",{className:"request",children:[(0,Z.jsxs)("div",{className:"info",children:[(0,Z.jsx)("div",{className:"profile-picture",children:(0,Z.jsx)(v.Z,{src:null===e||void 0===e?void 0:e.picture,alt:"aa"})}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)(u.rU,{className:"linkProfile",to:"/profile/".concat(null===e||void 0===e?void 0:e._id),children:(0,Z.jsx)("h5",{className:"noum",children:null===e||void 0===e?void 0:e.pseudo})}),(0,Z.jsxs)("p",{className:"text-muted",children:[null===e||void 0===e?void 0:e.following.length," following"]})]})]}),(0,Z.jsxs)("div",{className:"action",children:[(0,Z.jsx)(d.Z,{idTofollow:e._id,type:"suggestion"}),(0,Z.jsx)("button",{className:" btn-new",children:"gretting"})]})]},n)}))}),(null===_||void 0===_?void 0:_.length)>3&&(0,Z.jsx)("i",{className:"ri-arrow-drop-right-line",id:"right"})]}),(0,Z.jsx)("div",{children:(0,Z.jsx)(f.Z,{socket:n,type:"hisprofile",paramsId:z.id})})]}),(0,Z.jsx)("div",{className:"leftProfile",children:t&&(0,Z.jsx)(c.Z,{user:t})})]})})})}}}]);
//# sourceMappingURL=682.a8502f0f.chunk.js.map