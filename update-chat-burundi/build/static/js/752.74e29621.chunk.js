"use strict";(self.webpackChunkupdate_chat_burundi=self.webpackChunkupdate_chat_burundi||[]).push([[752],{5752:function(e,t,n){n.r(t),n.d(t,{default:function(){return X}});var r=n(4165),s=n(5861),i=n(9439),o=n(1413),c=n(2791),a=n(2010),l=n(9434),u=n(1243),d=n(4212),p=n(2948),h=n(184),m=function(e){var t=e.userData,n=e.commentaire,o=e.postId,m=(0,c.useState)(!1),f=(0,i.Z)(m,2),x=f[0],j=f[1],g=(0,c.useState)(""),v=(0,i.Z)(g,2),Z=v[0],w=v[1],b=(0,l.I0)(),k=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n,s){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z){e.next=5;break}return e.next=3,(0,u.Z)({method:"patch",url:"".concat(d.L,"/api/post/edit-comment-post/").concat(s),withCredentials:!0,data:{commentId:t,text:n}}).then((function(e){e.data;b(a.J.EditComment({postId:s,text:n,commentId:t})),j(!1)})).catch((function(e){return console.log(e)}));case 3:e.next=6;break;case 5:j(!1);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),N=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.Z)({method:"patch",url:"".concat(d.L,"/api/post/delet-comment-post/").concat(t),withCredentials:!0,data:{commentId:n}}).then((function(e){e.data;b(a.J.DeleteComment({postId:t,commentId:n})),j(!1)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,h.jsxs)(h.Fragment,{children:[t._id===n.commenterId&&(0,h.jsxs)(h.Fragment,{children:[!1===x&&(0,h.jsx)("small",{children:(0,h.jsx)("i",{onClick:function(){return j(!0)},className:"ri-edit-line"})}),!0===x&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("br",{}),(0,h.jsx)(p.Z,{defaultValue:n.text,onChange:function(e){return w(e.target.value)}}),(0,h.jsx)("button",{className:"btn-new-comm",onClick:function(){return k(n._id,Z,o)},children:(0,h.jsx)("i",{className:"ri-check-line"})})]})]}),"  ",t._id===n.commenterId&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("small",{children:(0,h.jsx)("i",{onClick:function(){return N(o,n._id)},className:"ri-delete-bin-line"})})," ",x&&(0,h.jsx)("small",{children:(0,h.jsx)("i",{onClick:function(){return j(!1)},className:"ri-refresh-line"})})]})]})},f=(0,c.memo)(m),x=n(7863),j=n(803),g=n(1582),v=n(9891),Z=function(e){var t=e.post,n=e.setUpdated,o=e.isUpdated,p=(0,l.I0)(),m=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("voulez-vous vraiment supprimer ce post ??")){e.next=4;break}return p(a.J.DeletePost(t._id)),e.next=4,(0,u.Z)({method:"delete",url:"".concat(d.L,"/api/post/").concat(t._id),withCredentials:!0}).then((function(e){alert("post was deleted successifull"),console.log(e)})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=[{title:"Delete"},{title:o?"Discard":"Edit"},{title:"Share"}],Z=(0,c.useState)(null),w=(0,i.Z)(Z,2),b=w[0],k=w[1],N=Boolean(b),I=function(){k(null)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(x.Z,{id:"basic-button","aria-controls":N?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":N?"true":void 0,onClick:function(e){k(e.currentTarget)},size:20,cursor:"pointer"}),(0,h.jsx)(j.Z,{id:"basic-menu",anchorEl:b,open:N,onClose:I,MenuListProps:{"aria-labelledby":"basic-button"},children:(0,h.jsx)(g.Z,{p:1,px:1,children:f.map((function(e){return(0,h.jsx)(v.Z,{onClick:function(){return function(e){switch(e){case"Delete":return m();case o?"Discard":"Edit":return I(),n((function(e){return!e}));case"Share":return alert("Share button");default:return 0}}(e.title)},children:e.title},Math.random())}))})})]})},w=n(5194),b=n(1896),k=n(6587),N=n(9445),I=n(1697),C=function(e){var t=e.post,n=e.socket,o=e.single,p=(0,c.useState)(!1),m=(0,i.Z)(p,2),f=m[0],x=m[1];console.log(o);var j=(0,l.I0)(),g=(0,c.useContext)(I.i),v=(0,l.v9)((function(e){return e.userInfo})),Z=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,s,i){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),!o&&j(a.J.LikePost({postId:t,userId:i})),o&&j(N.s.LikePost({postId:t,userId:i})),e.next=5,(0,u.Z)({method:"patch",url:"".concat(d.L,"/api/post/like/").concat(t),data:{id:i},withCredentials:!0}).then((function(e){null===n||void 0===n||n.emit("sendNotification",{senderName:i,postLiked:t,resverName:s,timeNot:new Date}),(0,u.Z)({method:"patch",url:"".concat(d.L,"/api/post/notification/").concat(s),data:{notifieId:v._id,notifiePseudo:v.pseudo,notification:"like your post",post:t,status:"pending",pictureNotifie:v.picture},withCredentials:!0}).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),w=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!1),o&&j(N.s.UnlikePost({postId:t,userId:n})),!o&&j(a.J.UnlikePost({postId:t,userId:n})),e.next=5,(0,u.Z)({method:"patch",url:"".concat(d.L,"/api/post/unlike/").concat(t),data:{id:n},withCredentials:!0}).then((function(e){e.data})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){t.likers.includes(g)&&x(!0)}),[g,t.likers,f]),(0,h.jsxs)(h.Fragment,{children:[f&&(0,h.jsx)("i",{onClick:function(){return w(t._id,g)},className:"ri-heart-pulse-fill",children:(0,h.jsx)("small",{children:t.likers.length})}),!1===f&&(0,h.jsx)("i",{onClick:function(){return Z(t._id,t.posterId,g)},className:"ri-heart-pulse-line",children:(0,h.jsx)("small",{children:t.likers.length})})]})},y=(0,c.memo)(C),_=n(7498),S=n(6151),F=n(3543),L=n(3400),P=n(9658),D=c.forwardRef((function(e,t){return(0,h.jsx)(P.Z,(0,o.Z)({elevation:6,ref:t,variant:"filled"},e))})),E=function(e){var t=e.post,n=e.userData,o=(0,c.useContext)(I.i),a=(0,c.useState)(!1),p=(0,i.Z)(a,2),m=p[0],f=p[1],x=(0,c.useState)(!1),j=(0,i.Z)(x,2),g=j[0],v=j[1],Z=(0,l.I0)(),w=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(_.Z.SavePost(t)),f(!0),e.next=4,(0,u.Z)({method:"put",url:"".concat(d.L,"/api/user/savepost/").concat(n),data:{idPostTosave:t},withCredentials:!0}).then((function(e){e.data;return v(!0)})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(_.Z.UnsavePost(t)),f(!1),e.next=4,(0,u.Z)({method:"put",url:"".concat(d.L,"/api/user/unsavepost/").concat(n),data:{idPostTounsave:t},withCredentials:!0}).then((function(e){e.data;f(!1),v(!0)})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){(0,b.xb)(n)||n&&n.saved.includes(t._id)&&f(!0)}),[t,m,n.saved,t._id,n]);var N=function(e,t){"clickaway"!==t&&v(!1)},C=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(S.Z,{color:"secondary",size:"small",onClick:N,children:"UNDO"}),(0,h.jsx)(L.Z,{size:"small","aria-label":"close",color:"inherit",onClick:N})]});return(0,h.jsxs)("div",{className:"bookmark",children:[m&&(0,h.jsx)("i",{onClick:function(){return k(t._id,o)},className:"ri-bookmark-fill"}),!1===m&&(0,h.jsx)("i",{onClick:function(){return w(t._id,o)},className:"ri-bookmark-line"}),(0,h.jsx)(F.Z,{open:g,autoHideDuration:6e3,onClose:N,message:m?"post saved sussessifuly":"post unsaved sussessifuly",action:C,children:(0,h.jsx)(D,{onClose:N,severity:"success",sx:{width:"100%"},children:m?"post saved sussessifuly":"post unsaved sussessifuly"})})]})},U=(0,c.memo)(E),M=n(3044),T=n(890),z=n(4554),J=n(9860),B=n(1087),R=function(e){for(var t=e.post,n=e.single,r=(0,l.v9)((function(e){return e.getusers})),s=(0,c.useContext)(I.i),i=[],o=0;o<=2;o++)for(var a=0;a<r.length;a++)t.likers[o]===r[a]._id&&i.push(r[a]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"liked_by",children:[(0,h.jsx)(h.Fragment,{children:3===i.length&&i.map((function(e){return(0,h.jsx)("span",{children:(0,h.jsx)(M.Z,{src:!(0,b.xb)(i)&&e.picture,alt:"assa",sx:{width:"100%",height:"100%",zoom:"50%"}})},Math.random())}))}),(0,h.jsxs)("p",{children:["liked by ",(0,h.jsx)("b",{children:!(0,b.xb)(i)&&i[0].pseudo})," ,",(0,h.jsx)("b",{children:3===i.length&&i[1].pseudo})," "]})]}),(0,h.jsx)("div",{className:"caption",children:(0,h.jsxs)(T.Z,{variant:"caption",children:[(0,h.jsxs)("b",{children:[!(0,b.xb)(t.comments)&&(0,h.jsxs)(h.Fragment,{children:[" ",t.comments[0].commenterId===s?"You":t.comments[0].commenterPseudo]})," "]})," ",!(0,b.xb)(t.comments)&&t.comments[0].text]})}),(0,h.jsx)(h.Fragment,{children:!n&&(0,h.jsx)("div",{className:" comments text-muted",children:(0,h.jsx)(B.rU,{to:"/single/post/".concat(t._id),children:(0,h.jsxs)("small",{children:[" ","view all ",!(0,b.xb)(t.comments)&&t.comments.length," comments"]})})})})]})},A=(0,c.memo)(R),H=n(7087),O=function(e){var t=(0,c.useState)(!1),n=(0,i.Z)(t,2),r=n[0],s=n[1],a=(0,c.useRef)(),l=function(e,t){e.forEach((function(e){e.isIntersecting&&setTimeout((function(){return s(!0)}),1e3)}))};return(0,c.useEffect)((function(){var e=new IntersectionObserver(l);return null!==a&&void 0!==a&&a.current&&e.observe(a.current),function(){e.disconnect()}}),[]),r?(0,h.jsx)(H.LazyLoadImage,(0,o.Z)((0,o.Z)({width:"100%"},e),{},{alt:"post-pict",effect:"blur",placeholderSrc:e.src})):(0,h.jsx)("div",{ref:a,style:{width:"100%",height:"200px",backgroundImage:" linear-gradient( 135deg, #FFE985 10%, #FA742B 100%)"},id:e.id})},W=(0,c.memo)(O),q=n(5392),V=c.forwardRef((function(e,t){return(0,h.jsx)(P.Z,(0,o.Z)({elevation:6,ref:t,variant:"filled"},e))})),G=function(e){var t=e.post,n=e.socket,o=e.count,m=e.single,x=(0,c.useState)(!0),j=(0,i.Z)(x,2),v=j[0],N=j[1],I=(0,c.useState)(!1),C=(0,i.Z)(I,2),_=C[0],P=C[1],D=(0,c.useState)(""),E=(0,i.Z)(D,2),R=E[0],H=E[1],O=(0,c.useState)(!1),G=(0,i.Z)(O,2),X=G[0],Y=G[1],K=(0,c.useState)(!0),Q=(0,i.Z)(K,2),$=Q[0],ee=(Q[1],(0,c.useState)(!1)),te=(0,i.Z)(ee,2),ne=te[0],re=te[1],se=(0,c.useState)(!1),ie=(0,i.Z)(se,2),oe=ie[0],ce=ie[1],ae=(0,c.useState)(!1),le=(0,i.Z)(ae,2),ue=le[0],de=le[1],pe=(0,c.useState)(t.message),he=(0,i.Z)(pe,2),me=he[0],fe=he[1],xe=(0,l.v9)((function(e){return e.getusers})),je=(0,l.v9)((function(e){return e.userInfo})),ge=(0,l.I0)(),ve=(0,c.useState)(),Ze=(0,i.Z)(ve,2),we=Ze[0],be=Ze[1],ke=(0,c.useState)(),Ne=(0,i.Z)(ke,2),Ie=Ne[0],Ce=Ne[1];(0,c.useEffect)((function(){!(0,b.xb)(xe[0])&&N(!1)}),[xe]);var ye=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!me&&!Ie&&0!==me.length){e.next=4;break}return re(!0),e.next=4,(0,u.Z)({method:"put",url:"".concat(d.L,"/api/post/").concat(t),data:{message:me,color:Ie},withCredentials:!0}).then((function(e){setTimeout((function(){ge(a.J.UpdatePost({postId:t,message:n})),Y(!0),ce(!1),re(!1),Ce("")}),2e3)})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,i){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R){e.next=6;break}return de(!0),e.next=4,(0,u.Z)({method:"patch",url:"".concat(d.L,"/api/post/comment-post/").concat(t),withCredentials:!0,data:{commenterId:je._id,commenterPseudo:je.pseudo,text:R}}).then((function(e){e.data;de(!1),H(""),(0,u.Z)({method:"patch",url:"".concat(d.L,"/api/post/notification/").concat(i),data:{notifieId:je._id,notifiePseudo:je.pseudo,notification:"comment to ur post",post:t,status:"pending",pictureNotifie:je.picture},withCredentials:!0}).then((function(e){console.log(e),null===n||void 0===n||n.emit("sendNotification",{senderName:je._id,resverName:i,timeNot:new Date})})).catch((function(e){return console.log(e)}));var c=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.Z)({method:"GET",url:d.L+"/api/post/",withCredentials:!0}).then((function(e){var t=e.data.slice(0,o);console.log("fetch again from card");for(var n=0;n<t.length;n++)t[n].comments.reverse();ge(a.J.fetchAllPosts((0,b.MN)(t,je.following,je._id)))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c()})).catch((function(e){console.log(e.message)}));case 4:e.next=7;break;case 6:alert("can't comment empty fill a field");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Se=function(e,t){"clickaway"!==t&&Y(!1)},Fe=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(S.Z,{color:"secondary",size:"small",onClick:Se,children:"UNDO"}),(0,h.jsx)(L.Z,{size:"small","aria-label":"close",color:"inherit",onClick:Se})]});return(0,c.useEffect)((function(){!function(){for(var e=[],t=0;t<8;t++){var n=["yellow","white","gray","gold","blue","silver","turquoise","cyan","brown","pink","purple","green"],r="linear-gradient(to bottom right, rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+"), "+n[Math.floor(Math.random()*n.length)]+")";e.push(r)}be(e)}()}),[]),(0,c.useEffect)((function(){document.querySelectorAll(".colorPallete span").forEach((function(e){e.addEventListener("click",(function(e){Ce(e.target.id)}))}))})),(0,h.jsxs)("div",{className:"feed",children:[v?(0,h.jsx)(w.Z,{}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"head",children:[(0,h.jsxs)("div",{className:"user",children:[$&&(0,h.jsxs)("svg",{fill:"currentColor",viewBox:"0 0 12 13",width:"1em",height:"1em",title:"v\xe9rified account",children:[(0,h.jsx)("title",{children:"Compte v\xe9rifi\xe9"}),(0,h.jsx)("g",{fillRule:"evenodd",transform:"translate(-98 -917)",children:(0,h.jsx)("path",{d:"m106.853 922.354-3.5 3.5a.499.499 0 0 1-.706 0l-1.5-1.5a.5.5 0 1 1 .706-.708l1.147 1.147 3.147-3.147a.5.5 0 1 1 .706.708m3.078 2.295-.589-1.149.588-1.15a.633.633 0 0 0-.219-.82l-1.085-.7-.065-1.287a.627.627 0 0 0-.6-.603l-1.29-.066-.703-1.087a.636.636 0 0 0-.82-.217l-1.148.588-1.15-.588a.631.631 0 0 0-.82.22l-.701 1.085-1.289.065a.626.626 0 0 0-.6.6l-.066 1.29-1.088.702a.634.634 0 0 0-.216.82l.588 1.149-.588 1.15a.632.632 0 0 0 .219.819l1.085.701.065 1.286c.014.33.274.59.6.604l1.29.065.703 1.088c.177.27.53.362.82.216l1.148-.588 1.15.589a.629.629 0 0 0 .82-.22l.701-1.085 1.286-.064a.627.627 0 0 0 .604-.601l.065-1.29 1.088-.703a.633.633 0 0 0 .216-.819"})})]}),(0,h.jsx)("div",{className:"profile-picture ",children:(0,h.jsx)(M.Z,{src:!(0,b.xb)(xe[0])&&xe.map((function(e){return e._id===t.posterId?e.picture:null})).join(""),alt:"ss"})}),(0,h.jsxs)("div",{className:"ingo",children:[(0,h.jsx)("span",{children:(0,h.jsxs)("h5",{className:"noum",children:[(0,h.jsx)(B.rU,{className:"linkProfile",to:t.posterId===je._id?"/profile/me":"/profile/".concat(t.posterId),children:!(0,b.xb)(xe[0])&&xe.map((function(e){return e._id===t.posterId?e.pseudo:null})).join("")})," ",t.posterId!==je._id&&(0,h.jsx)(k.Z,{idTofollow:t.posterId,type:"card",socket:n})]})}),(0,h.jsx)(T.Z,{variant:"caption",children:(0,b.RX)(t.createdAt)})]})]}),(0,h.jsx)("span",{className:"edit",children:t.posterId===je._id&&(0,h.jsx)(Z,{post:t,setUpdated:ce,isUpdated:oe})})]}),(0,h.jsxs)("div",{className:"news",children:[oe&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(p.Z,{defaultValue:t.message,onChange:function(e){return fe(e.target.value)}}),(0,h.jsx)("button",{className:"btn-new",onClick:function(){return ye(t._id,me)},children:(0,h.jsx)(J.Z,{loading:ne,sx:{padding:"0px",height:"10px",color:"var(--color-name)",textTransform:"lowercase"},children:"update"})}),(0,h.jsx)("button",{className:"btn-new",onClick:function(){return ce(!1)},children:"discard"})]}),!1===oe&&!t.video&&!t.picture&&(0,h.jsx)(q.Z,{type:"posts",text:t.message,color:t.color}),!0===oe&&!t.video&&!t.picture&&(0,h.jsx)(q.Z,{type:"posts",text:t.message,color:Ie||t.color}),!1===oe&&(t.video||t.picture)&&(0,h.jsx)("b",{children:t.message})]}),(0,h.jsxs)("div",{className:"photo",children:[t.picture&&(0,h.jsx)(W,{id:t._id,src:t.picture},t._id),t.video&&(0,h.jsx)("iframe",{width:"400",height:"250",src:t.video,title:Math.random()})]}),(0,h.jsxs)("div",{className:"action-buttons",children:[(0,h.jsxs)("div",{className:"interaction-buttons",children:[(0,h.jsx)(y,{post:t,socket:n,single:m}),"  ",(0,h.jsx)("i",{onClick:function(){return P((function(e){return!e}))},className:"ri-chat-3-line",children:(0,h.jsx)("small",{children:t.comments.length})}),"  ",(0,h.jsx)("i",{className:"ri-share-line"})]}),t.posterId!==je._id&&(0,h.jsx)(U,{post:t,userData:je})]}),t.likers.length>2&&(0,h.jsx)(A,{post:t}),_&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(z.Z,{sx:{display:"flex",gap:2},children:[(0,h.jsx)(M.Z,{src:je.picture,sx:{width:"25px",height:"25px"}}),(0,h.jsxs)(z.Z,{width:"95%",position:"relative",children:[(0,h.jsx)(p.Z,{className:"commentInput",placeholder:"give ur idea....",onChange:function(e){return H(e.target.value)},value:R}),(0,h.jsx)("button",{onClick:function(){return _e(t._id,t.posterId)},className:ue?"disableButton btn-new":"btn-new",children:ue?"waiting..":"send"})]})]}),(0,h.jsx)(h.Fragment,{children:t.comments.map((function(e){return(0,h.jsx)(g.Z,{className:"commentBox",direction:"column",spacing:1,p:1,children:(0,h.jsxs)(z.Z,{sx:{display:"flex",gap:2},children:[(0,h.jsx)(M.Z,{src:!(0,b.xb)(xe[0])&&xe.map((function(t){return t._id===e.commenterId?t.picture:null})).join(""),alt:"ss",sx:{width:"25px",height:"25px"}}),(0,h.jsxs)(z.Z,{sx:{display:"inline-block",gap:2},children:[(0,h.jsx)(B.rU,{className:"linkProfile",to:"/profile/".concat(null===e||void 0===e?void 0:e.commenterId),children:(0,h.jsx)(T.Z,{variant:"caption",children:!(0,b.xb)(t.comments)&&e.commenterPseudo})})," ",je._id!==e.commenterId&&(0,h.jsx)(k.Z,{idTofollow:e.commenterId,type:"card"}),(0,h.jsx)(T.Z,{variant:"body2",sx:{padding:"3px 4px",background:"#888",fontSize:"0.8rem",borderRadius:"10px",minWidth:"100px",maxWidth:"300px",minHeight:"40px",wordWrap:"break-word",position:"relative","'&:before'":{width:"30px",height:"30px",background:"red",position:"absolute"}},children:!(0,b.xb)(t.comments)&&e.text}),(0,h.jsx)(f,{userData:je,commentaire:e,postId:t._id}),(0,h.jsx)(T.Z,{variant:"caption",children:(0,b.Mp)(e.timestamp)})]})]})},e._id)}))})]}),(0,h.jsx)(F.Z,{open:X,autoHideDuration:6e3,onClose:Se,action:Fe,children:(0,h.jsx)(V,{onClose:Se,severity:"success",sx:{width:"100%"},children:"post has been updated succussifull"})})]}),oe&&!t.video&&!t.picture&&(0,h.jsxs)("div",{className:"colorPallete",children:[we&&we.map((function(e,t){return(0,h.jsx)("span",{id:e,style:{backgroundImage:e}},t)})),(0,h.jsx)("span",{children:(0,h.jsx)("input",{type:"color"})})]})]},t._id)},X=(0,c.memo)(G)},5392:function(e,t,n){var r=n(2791),s=n(184),i=function(e){var t=e.text,n=e.type,r=e.color;return(0,s.jsxs)("div",{style:{backgroundImage:r||" linear-gradient(to right bottom, rgb(228, 64, 92), purple)"},className:"cardCanvas",children:["trending"===n&&(0,s.jsx)("p",{children:t}),"posts"===n&&(0,s.jsx)("h2",{children:t})]})};t.Z=(0,r.memo)(i)},6587:function(e,t,n){var r=n(4165),s=n(5861),i=n(9439),o=n(1243),c=n(2791),a=n(9434),l=n(7498),u=n(1896),d=n(4212),p=n(184),h=function(e){var t=e.idTofollow,n=e.type,h=e.socket,m=(0,c.useState)(!1),f=(0,i.Z)(m,2),x=f[0],j=f[1],g=(0,a.I0)(),v=(0,a.v9)((function(e){return e.userInfo})),Z=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,(0,o.Z)({method:"patch",url:"".concat(d.L,"/api/user/follow/").concat(t),withCredentials:!0,data:{idToFollow:n}}).then((function(e){g(l.Z.Follow(n)),(0,o.Z)({method:"patch",url:"".concat(d.L,"/api/post/notification/").concat(n),data:{notifieId:v._id,notifiePseudo:v.pseudo,notification:"start following  u",status:"pending",pictureNotifie:v.picture},withCredentials:!0}).then((function(e){console.log(e),h.emit("sendNotification",{senderName:v._id,resverName:n,timeNot:new Date})})).catch((function(e){return console.log(e)}))})).catch((function(e){console.log(e.message)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n,s){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!1),e.next=3,(0,o.Z)({method:"patch",url:"".concat(d.L,"/api/user/unfollow/").concat(n),withCredentials:!0,data:{idToUnFollow:s}}).then((function(e){g(l.Z.UnFollow(t))})).catch((function(e){console.log(e.message)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){(0,u.xb)(v.following)||(v.following.includes(t)?j(!0):j(!1))}),[v,t]),(0,p.jsxs)(p.Fragment,{children:[!0===x&&(0,p.jsxs)("span",{onClick:function(){return w(v._id,t)},children:["suggestion"===n&&(0,p.jsx)("button",{className:"btn btn-primary",children:"UnFollow"}),"card"===n&&(0,p.jsx)("i",{className:"ri-checkbox-circle-fill"})]}),!1===x&&t!==v._id&&(0,p.jsxs)("span",{onClick:function(){return Z(v._id,t)},children:["suggestion"===n&&(0,p.jsx)("button",{className:"btn btn-primary",children:"follow"}),"card"===n&&(0,p.jsx)("i",{className:"ri-checkbox-circle-line"})]}),!1===x&&t===v._id&&(0,p.jsxs)("span",{children:["suggestion"===n&&(0,p.jsx)("button",{className:"btn btn-primary disableButton",children:"follow"}),"card"===n&&(0,p.jsx)("i",{className:"ri-checkbox-circle-line"})]})]})};t.Z=(0,c.memo)(h)}}]);
//# sourceMappingURL=752.74e29621.chunk.js.map