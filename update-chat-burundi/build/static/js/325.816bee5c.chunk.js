(self.webpackChunkupdate_chat_burundi=self.webpackChunkupdate_chat_burundi||[]).push([[325],{3738:function(e,i,s){var n={"./ar.json":2557,"./be.json":8367,"./cs.json":6037,"./de.json":4896,"./en.json":678,"./es.json":2378,"./fa.json":4057,"./fi.json":7453,"./fr.json":364,"./hi.json":7992,"./it.json":9438,"./ja.json":6847,"./kr.json":9983,"./nl.json":1936,"./pl.json":1902,"./pt.json":9761,"./ru.json":8656,"./sa.json":193,"./tr.json":7349,"./uk.json":3128,"./vi.json":1070,"./zh.json":7268};function t(e){var i=l(e);return s(i)}function l(e){if(!s.o(n,e)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return n[e]}t.keys=function(){return Object.keys(n)},t.resolve=l,e.exports=t,t.id=3738},367:function(e,i,s){"use strict";s(2791);var n=s(184);i.Z=function(e){return document.title="Chat Burundi - "+e.title,(0,n.jsx)("div",{className:"w-100",children:e.children})}},6904:function(e,i,s){"use strict";s.r(i),s.d(i,{default:function(){return _}});var n=s(9439),t=s(2791),l=s(8436),r=s(619),o=s(428),a=s(4165),d=s(5861),c=s(1243),u=s(4212),v=s(2090),h=s(2426),m=s.n(h),j=s(1896),f=s(184),x=function(e){var i,s,l,o=e.user,h=e.chat,x=e.notifications,g=e.markThisNotificationAsRead,p=e.currentChat,N=function(e,i){return{recipientUser:null===i||void 0===i?void 0:i.find((function(i){return i!==(null===e||void 0===e?void 0:e._id)}))}}(o,null===h||void 0===h?void 0:h.users),C=(N.recipientUser,(0,v.AG)(x)),k=null===C||void 0===C?void 0:C.filter((function(e){var i;return e.senderId===(null===(i=(0,j.kR)(null===o||void 0===o?void 0:o._id,null===h||void 0===h?void 0:h.users))||void 0===i?void 0:i._id)})),_=function(e){var i=(0,t.useContext)(r.p),s=i.newMessage,l=i.notifications,o=(0,t.useState)(null),v=(0,n.Z)(o,2),h=v[0],m=v[1];return(0,t.useEffect)((function(){var i=function(){var i=(0,d.Z)((0,a.Z)().mark((function i(){return(0,a.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,c.Z)({method:"get",url:"".concat(u.L,"/api/message/").concat(null===e||void 0===e?void 0:e._id),withCredentials:!0}).then((function(e){var i=e.data,s=i[(null===i||void 0===i?void 0:i.length)-1];m(s)})).catch((function(e){console.log(e)}));case 2:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}();i()}),[s,l]),{latestMessage:h}}(h),b=_.latestMessage;return(0,f.jsxs)("div",{className:(null===h||void 0===h?void 0:h._id)===(null===p||void 0===p?void 0:p._id)?"chat-box active":"chat-box",onClick:function(){0!==(null===k||void 0===k?void 0:k.length)&&g(k,x)},children:[(0,f.jsx)("div",{className:"img-box",children:(0,f.jsx)("img",{className:"img-cover",src:null===(i=(0,j.kR)(null===o||void 0===o?void 0:o._id,null===h||void 0===h?void 0:h.users))||void 0===i?void 0:i.picture,alt:Math.random()})}),(0,f.jsxs)("div",{className:"chat-details",children:[(0,f.jsxs)("div",{className:"text-head",children:[!(null!==h&&void 0!==h&&h.isGroupChat)&&(0,f.jsx)("h4",{children:null===(s=(0,j.kR)(null===o||void 0===o?void 0:o._id,null===h||void 0===h?void 0:h.users))||void 0===s?void 0:s.pseudo}),(null===h||void 0===h?void 0:h.isGroupChat)&&(0,f.jsx)("h4",{children:null===h||void 0===h?void 0:h.chatName}),(0,f.jsx)("p",{className:"time unread",children:m()(null===b||void 0===b?void 0:b.createdAt).calendar()})]}),(0,f.jsxs)("div",{className:"text-message",children:[(0,f.jsx)("p",{children:(l=null===b||void 0===b?void 0:b.message,(null===l||void 0===l?void 0:l.length)>20?"".concat(null===l||void 0===l?void 0:l.substr(0,10),"....."):l)}),(null===k||void 0===k?void 0:k.length)>0&&(0,f.jsx)("b",{children:(null===k||void 0===k?void 0:k.length)>0?k.length:""})]})]})]})},g=function(e){var i,s,n,l=e.currentChat,r=e.messages,o=e.user,a=e.isMessageLoading,d=e.onlineUsers,c=e.updatecurrentChat;return(0,t.useEffect)((function(){if(r){var e,i=document.querySelectorAll(".message-box");null===(e=i[(null===i||void 0===i?void 0:i.length)-1])||void 0===e||e.scrollIntoView({behavior:"smooth"})}}),[r]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"header",children:[(0,f.jsx)("i",{className:"ri-arrow-left-line",onClick:function(){return c(null)}}),(0,f.jsxs)("div",{className:"img-text",children:[(0,f.jsx)("div",{className:"user-img",children:(0,f.jsx)("img",{className:"dp",src:null===(i=(0,j.kR)(null===o||void 0===o?void 0:o._id,null===l||void 0===l?void 0:l.users))||void 0===i?void 0:i.picture,alt:"jjd"})}),(0,f.jsxs)("h4",{children:[null===(s=(0,j.kR)(null===o||void 0===o?void 0:o._id,null===l||void 0===l?void 0:l.users))||void 0===s?void 0:s.pseudo,(0,f.jsx)("br",{}),(0,f.jsx)("span",{children:(0,j.Gg)(null===(n=(0,j.kR)(null===o||void 0===o?void 0:o._id,null===l||void 0===l?void 0:l.users))||void 0===n?void 0:n._id,d)?"Online":"offline"})]})]}),(0,f.jsxs)("div",{className:"nav-icons",children:[(0,f.jsx)("i",{className:"ri-search-line"}),(0,f.jsx)("li",{children:(0,f.jsx)("i",{className:"fa-solid fa-ellipsis-vertical"})})]})]}),a&&(0,f.jsx)("p",{style:{textAlign:"center",width:"100%",justifyContent:"center",display:"flex",fontSize:"2rem",height:"100%"}}),!a&&(0,f.jsx)("div",{className:"chat-container",children:r&&(null===r||void 0===r?void 0:r.map((function(e,i){var s;return(0,f.jsx)("div",{className:(null===e||void 0===e||null===(s=e.sender)||void 0===s?void 0:s._id)===(null===o||void 0===o?void 0:o._id)?"message-box my-message":"message-box friend-message",children:(0,f.jsxs)("p",{children:[null===e||void 0===e?void 0:e.message,(0,f.jsx)("br",{}),(0,f.jsx)("span",{children:m()(e.createdAt).calendar()})]})},i)})))})]})},p=s(3044),N=function(e){var i=e.potentielsChats,s=e.creatChat;return(0,t.useEffect)((function(){var e=document.querySelector(".carousel");document.querySelectorAll(".potentiel-chats i").forEach((function(i){i.addEventListener("click",(function(i){"left"===i.target.id?e.scrollLeft-=10:e.scrollLeft+=10}))}));var i,s,n=!1;e.addEventListener("mousedown",(function(t){n=!0,e.classList.add("dragging"),i=t.pageX,s=e.scrollLeft})),e.addEventListener("mousemove",(function(t){n&&(e.scrollLeft=s-(t.pageX-i))})),document.addEventListener("mouseup",(function(){n=!1,e.classList.remove("dragging")}))}),[]),(0,f.jsxs)("div",{className:"potentiel-chats",children:[(0,f.jsx)("i",{className:"ri-arrow-drop-right-line",id:"left"}),(0,f.jsx)("div",{className:"carousel mouving",children:null===i||void 0===i?void 0:i.map((function(e,i){return(0,f.jsx)(p.Z,{src:null===e||void 0===e?void 0:e.picture,alt:"heloo",name:"profile",className:"avatar",onClick:function(){return s(null===e||void 0===e?void 0:e._id)}},i)}))}),(0,f.jsx)("i",{className:"ri-arrow-drop-left-line",id:"right"})]})},C=s(367),k=s(724),_=function(e){e.socket;var i=(0,t.useContext)(r.p),s=i.userChats,a=(i.isUserChatsLoading,i.userChatsError,i.potentielsChats),d=i.creatChat,c=i.updatecurrentChat,u=i.currentChat,v=i.messages,h=i.isMessageLoading,m=i.sendTexMessage,j=i.onlineUsers,p=i.notifications,_=i.markThisNotificationAsRead,b=i.InputRef,w=(0,t.useContext)(l.V).user,y=(0,t.useState)(""),L=(0,n.Z)(y,2),E=L[0],Z=L[1];return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(C.Z,{title:"messenger",children:(0,f.jsxs)("div",{className:"main-container",children:[(0,f.jsxs)("div",{className:"left-container",ref:b,children:[(0,f.jsxs)("div",{className:"header",children:[(0,f.jsx)("div",{className:"user-img",children:(0,f.jsx)("img",{className:"dp",src:null===w||void 0===w?void 0:w.picture,alt:"heloo"})}),(0,f.jsxs)("div",{className:"nav-icons",children:[(0,f.jsx)("li",{children:(0,f.jsx)("i",{className:"ri-group-line"})}),(0,f.jsx)("li",{children:(0,f.jsx)("i",{className:"ri-chat-2-line"})}),(0,f.jsx)("li",{children:(0,f.jsx)("i",{className:"ri-more-2-fill"})})]})]}),(0,f.jsx)(N,{potentielsChats:a,creatChat:d}),(0,f.jsxs)("div",{className:"search-container",children:[(0,f.jsxs)("div",{className:"input",children:[(0,f.jsx)("i",{className:"ri-search-line"}),(0,f.jsx)("input",{type:"text",placeholder:"Search or start new chat   "})]}),(0,f.jsx)("i",{className:"ri-more-fill"})]}),(0,f.jsx)("div",{className:"chat-list",children:null===s||void 0===s?void 0:s.map((function(e,i){return(0,f.jsx)("div",{onClick:function(){return c(e)},children:(0,f.jsx)(x,{user:w,chat:e,notifications:p,markThisNotificationAsRead:_,currentChat:u})},i)}))})]}),(0,f.jsxs)("div",{className:"right-container",children:[!u&&(0,f.jsx)("p",{style:{textAlign:"center",width:"100%",justifyContent:"center",display:"flex",fontSize:"2rem",height:"100%"},children:"no conversation selected yet......"}),u&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g,{user:w,currentChat:u,messages:v,isMessageLoading:h,onlineUsers:j,updatecurrentChat:c}),(0,f.jsxs)("div",{className:"chatbox-input",children:[(0,f.jsx)("i",{className:"ri-attachment-2"}),(0,f.jsx)("i",{className:"ri-mic-line"}),(0,f.jsx)(k.Z,{value:E,onChange:Z,fontFamily:"nonito"}),(0,f.jsx)(o.Z,{onClick:function(){return m(E,u,Z)},children:"send"})]})]})]})]})})})}}}]);
//# sourceMappingURL=325.816bee5c.chunk.js.map