"use strict";(self.webpackChunkupdate_chat_burundi=self.webpackChunkupdate_chat_burundi||[]).push([[99],{367:function(e,n,s){s(2791);var t=s(184);n.Z=function(e){return document.title="Chat Burundi - "+e.title,(0,t.jsx)("div",{className:"w-100",children:e.children})}},7099:function(e,n,s){s.r(n);var t=s(4942),r=s(1413),a=s(4165),o=s(5861),i=s(9439),c=s(2791),l=s(367),u=s(4761),d=s(7689),h=s(1087),_=s(1034),m=s(9860),g=s(4212),p=s(1243),w=s(184);n.default=function(){var e=(0,c.useState)({newpassword:"",confirmnewpassword:""}),n=(0,i.Z)(e,2),s=n[0],f=n[1],x=(0,d.UO)(),Z=(0,d.s0)(),j=(0,c.useState)(""),v=(0,i.Z)(j,2),b=v[0],N=v[1],k=(0,c.useState)(""),C=(0,i.Z)(k,2),y=C[0],S=C[1],q=(0,c.useState)(!1),T=(0,i.Z)(q,2),L=T[0],D=T[1],E=(0,c.useState)(!1),F=(0,i.Z)(E,2),J=F[0],P=F[1],V=(0,c.useState)(!1),B=(0,i.Z)(V,2),M=B[0],U=B[1];(0,c.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.Z)({method:"get",url:"".concat(g.L,"/api/user"),withCredentials:!0}).then((function(e){var n=e.data.filter((function(e){return e.email===x.email}));console.log(n[0].requestChangePassword),!1===n[0].requestChangePassword?setTimeout((function(){Z("/change-password/".concat(n[0].email,"/notFound"))}),5e3):U(!0)})).catch((function(){return console.log("error")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var Y=function(e){var n=e.currentTarget;f((0,r.Z)((0,r.Z)({},s),{},(0,t.Z)({},n.name,n.value)))},G=function(e){"checked"===e?D(!0):"notchecked"===e&&D(!1)};return(0,w.jsx)(l.Z,{title:"Changing password",children:M&&(0,w.jsx)("div",{className:u.Z.container_login,children:(0,w.jsxs)("div",{className:u.Z.login_form_container,children:[(0,w.jsx)("div",{className:u.Z.left,children:(0,w.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s.newpassword!==s.confirmnewpassword&&(N("password are not equal"),setTimeout((function(){N("")}),5e3)),s.newpassword===s.confirmnewpassword&&(P(!0),(0,p.Z)({method:"put",url:"".concat(g.L,"/api/user/changepassword/user"),data:{email:x.email,newpassword:s.newpassword},withCredentials:!0}).then((function(e){var n=e.data;P(!1),"password changed successifully"!==n.message?(N(n.message),setTimeout((function(){N("")}),5e3)):(S(n.message),setTimeout((function(){Z("/login")}),2e3))})).catch((function(e){return console.log(e)})))},className:u.Z.form_container,children:[(0,w.jsx)("h1",{children:"Changing password"}),(0,w.jsx)("input",{type:"email",value:x.email,disabled:!0,className:u.Z.input}),(0,w.jsx)("input",{type:L?"text":"password",placeholder:"create new password",name:"newpassword",value:s.newpassword,required:!0,className:u.Z.input,onChange:Y}),(0,w.jsx)("input",{type:L?"text":"password",placeholder:"Confirm your new password",name:"confirmnewpassword",value:s.confirmnewpassword,required:!0,className:u.Z.input,onChange:Y}),(0,w.jsx)("div",{className:u.Z.checkbox,children:L?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(_.Z,{checked:!0,onClick:function(){return G("notchecked")}}),(0,w.jsx)("p",{children:"hide password"})]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(_.Z,{onClick:function(){return G("checked")}}),(0,w.jsx)("p",{children:"show password"})]})}),b&&(0,w.jsx)("div",{className:u.Z.error_msg,children:b}),y&&(0,w.jsx)("div",{className:u.Z.success_msg,children:y}),(0,w.jsx)(m.Z,{loading:J,sx:{padding:"0px"},children:(0,w.jsx)("button",{type:"submit",className:u.Z.green_btn,children:"change password"})})]})}),(0,w.jsxs)("div",{className:u.Z.right,children:[(0,w.jsx)("h1",{children:"No needed ?"}),(0,w.jsx)(h.rU,{to:"/login",children:(0,w.jsx)("button",{className:u.Z.white_button,children:"Return to login"})})]})]})})})}},4761:function(e,n){n.Z={container_login:"login_container_login__iLnj4",login_form_container:"login_login_form_container__+6lt+",left:"login_left__EDsY0",form_container:"login_form_container__SGM+W",input:"login_input__BV7y9",error_msg:"login_error_msg__JaY1K",success_msg:"login_success_msg__VvfNr",checkbox:"login_checkbox__lLEDJ",right:"login_right__x9Z1V",green_btn:"login_green_btn__roMoI",white_button:"login_white_button__wPgJ3"}}}]);
//# sourceMappingURL=99.834238bb.chunk.js.map