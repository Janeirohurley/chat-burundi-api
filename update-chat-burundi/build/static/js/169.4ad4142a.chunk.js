"use strict";(self.webpackChunkupdate_chat_burundi=self.webpackChunkupdate_chat_burundi||[]).push([[169],{8169:function(n,e,t){t.r(e);var r=t(9439),o=t(1413),s=t(4165),i=t(5861),a=t(2791),c=t(1243),u=t(2010),l=t(9434),d=t(1896),f=t(4212),h=t(5194),p=t(6151),x=t(3543),m=t(3400),v=t(9658),Z=t(184),g=function(){var n=(0,i.Z)((0,s.Z)().mark((function n(e){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(n){setTimeout(n,3e3)}));case 2:return n.abrupt("return",e);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),j=(0,a.lazy)((function(){return g(Promise.all([t.e(860),t.e(762),t.e(191),t.e(752)]).then(t.bind(t,5752)))})),k=a.forwardRef((function(n,e){return(0,Z.jsx)(v.Z,(0,o.Z)({elevation:6,ref:e,variant:"filled"},n))})),b=function(n){var e=n.socket,t=n.type,o=n.paramsId,v=(n.hisprofile,n.postId),g=(0,l.I0)(),b=(0,a.useState)(!0),w=(0,r.Z)(b,2),C=w[0],S=w[1],E=(0,a.useState)(5),_=(0,r.Z)(E,2),y=_[0],M=_[1],I=(0,a.useState)(),N=(0,r.Z)(I,2),T=N[0],z=N[1],L=(0,l.v9)((function(n){return n.posts})),O=(0,l.v9)((function(n){return n.Allpost})),P=(0,l.v9)((function(n){return n.userInfo})),A=(0,a.useState)(!1),H=(0,r.Z)(A,2),D=H[0],R=H[1],F=(0,a.useState)(!1),G=(0,r.Z)(F,2),J=G[0],U=G[1],W=function(){window.innerHeight+document.documentElement.scrollTop+1>document.scrollingElement.scrollHeight-50&&S(!0)},q=function(n,e){"clickaway"!==e&&U(!1)},B=(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(p.Z,{color:"secondary",size:"small",onClick:q,children:"UNDO"}),(0,Z.jsx)(m.Z,{size:"small","aria-label":"close",color:"inherit",onClick:q})]});(0,a.useEffect)((function(){if(C){var n=function(){var n=(0,i.Z)((0,s.Z)().mark((function n(){return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,c.Z)({method:"GET",url:f.L+"/api/post/",withCredentials:!0}).then((function(n){for(var e=n.data,t=(0,d.MN)(e,P.following,P._id).slice(0,y),r=0;r<t.length;r++)t[r].comments.reverse();g(u.J.fetchAllPosts(t)),S(!1),M((function(n){return n+5}))})).catch((function(n){R(n.message),S(!1),U(!0)}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}}),[C]),(0,a.useEffect)((function(){return window.addEventListener("scroll",W),function(){return window.removeEventListener("scroll",W)}}),[]);var K=(0,a.useCallback)((function(){var n=O.filter((function(n){return n._id===v}));z(n)}),[O]);(0,a.useEffect)((function(){K(),console.log(T)}),[K]);var Q=(0,a.useCallback)((function(){S(!0),R(!1)}),[]);return(0,Z.jsxs)("div",{className:o?"hisPosts":"feeds",children:["home"===t&&!(0,d.xb)(L[0])&&L.map((function(n,t){return(0,Z.jsx)(a.Suspense,{fallback:(0,Z.jsx)(h.Z,{},Math.random()),children:(0,Z.jsx)(j,{post:n,count:y,socket:e},n._id)},t)})),"profile"===t&&!(0,d.xb)(L[0])&&L.map((function(n,t){return(0,Z.jsx)(a.Suspense,{fallback:(0,Z.jsx)(h.Z,{},Math.random()),children:n.posterId===P._id&&(0,Z.jsx)(j,{post:n,count:y,socket:e},Math.random())},t)})),"hisprofile"===t&&o&&!(0,d.xb)(L[0])&&L.map((function(n,t){return(0,Z.jsx)(a.Suspense,{fallback:(0,Z.jsx)(h.Z,{},Math.random()),children:n.posterId===o&&(0,Z.jsx)(j,{post:n,count:y,socket:e},Math.random())},t)})),"single"===t&&!(0,d.xb)(O[0])&&v&&O.map((function(n,r){return(0,Z.jsx)(a.Suspense,{fallback:(0,Z.jsx)(h.Z,{},Math.random()),children:n._id===v&&(0,Z.jsx)(j,{post:n,count:1,socket:e,single:t},Math.random())},r)})),D&&(0,Z.jsx)("div",{style:{cursor:"pointer"},onClick:Q,className:"cardCanvas",children:D}),C&&(0,Z.jsx)(h.Z,{}),(0,Z.jsx)(x.Z,{open:J,autoHideDuration:6e3,onClose:q,action:B,children:(0,Z.jsx)(k,{onClose:q,severity:"error",sx:{width:"100%"},children:"CONNECTION WAS LOST"})})]})};e.default=(0,a.memo)(b)},5194:function(n,e,t){t.d(e,{Z:function(){return i}});t(2791);var r=t(7047),o=t(1582),s=t(184);function i(){return(0,s.jsxs)(o.Z,{spacing:1,sx:{backgroundColor:"var(--color-white)",margin:"1rem 0rem",padding:"1.1rem",borderRadius:"10px"},children:[(0,s.jsx)(r.Z,{variant:"circular",width:40,height:40,sx:{backgroundColor:"var(--color-light)"}}),(0,s.jsx)(r.Z,{variant:"text",sx:{fontSize:"1rem",backgroundColor:"var(--color-light)"}}),(0,s.jsx)(r.Z,{variant:"rectangular",width:"100%",height:200,sx:{backgroundColor:"var(--color-light)"}}),(0,s.jsx)(r.Z,{variant:"rounded",width:"100%",height:60,sx:{backgroundColor:"var(--color-light)"}})]})}}}]);
//# sourceMappingURL=169.4ad4142a.chunk.js.map