"use strict";(self.webpackChunkupdate_chat_burundi=self.webpackChunkupdate_chat_burundi||[]).push([[682],{367:function(e,s,i){i(2791);var n=i(184);s.Z=function(e){return document.title="Chat Burundi - "+e.title,(0,n.jsx)("div",{className:"w-100",children:e.children})}},3821:function(e,s,i){var n=i(9439),t=i(2791),l=i(9434),r=i(7689),o=i(1087),a=i(1896),c=i(1933),d=i(6587),u=i(3044),h=i(184),f=(0,t.memo)((function(){var e=(0,l.v9)((function(e){return e.getusers})),s=(0,l.v9)((function(e){return e.userInfo})),i=(0,t.useState)(!0),f=(0,n.Z)(i,2),v=f[0],m=f[1],x=(0,t.useState)(!0),p=(0,n.Z)(x,2),g=p[0],j=p[1],N=(0,t.useState)([]),w=(0,n.Z)(N,2),b=w[0],Z=w[1],k=(0,t.useState)([]),y=(0,n.Z)(k,2),_=y[0],L=y[1],C=(0,l.v9)((function(e){return e.AllChat})),S=(0,l.v9)((function(e){return e.OnlineUsers})),M=(0,c.g)().setSelectedChat,E=(0,r.s0)();(0,t.useEffect)((function(){if(!(0,a.xb)(C[0])){var e=C.filter((function(e){return e.latestMessage})),s=Object.keys(e).map((function(s){return e[s]})).sort((function(e,s){var i,n;return(null===(i=s.latestMessage)||void 0===i?void 0:i.createdAt)-(null===(n=e.latestMessage)||void 0===n?void 0:n.createdAt)}));s.length=3,L(s)}}),[C]),(0,t.useEffect)((function(){!g||(0,a.xb)(e[0])||(0,a.xb)(s._id)||(!function(){for(var i=[],n=0;n<e.length;n++)e[n]===s._id||e[n].followers.includes(s._id)||i.push(e[n]._id);i.sort((function(){return.5-Math.random()})),window.innerHeight>70&&(i.length=5),Z(i)}(),m(!1),j(!1))}),[e,s,g]);return(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:"right",children:[(0,h.jsxs)("div",{className:"messages",children:[(0,h.jsx)("div",{className:"heading",children:(0,h.jsx)("h4",{children:"Latest Messages"})}),_&&_.map((function(e){var i,n,t,l,r;return(0,h.jsxs)("div",{className:"message",onClick:function(){return function(e){M(e),E("/messenger")}(e)},children:[(0,h.jsxs)("div",{className:"profile-picture",children:[(0,h.jsx)(u.Z,{src:null===(i=e.latestMessage)||void 0===i?void 0:i.sender.picture,alt:"aa"}),(0,h.jsx)("div",{className:(0,a.Gg)(null===(n=e.latestMessage)||void 0===n?void 0:n.sender._id,S)?"active":""})]}),(0,h.jsxs)("div",{className:"messge-body",children:[(0,h.jsx)("h5",{children:(null===(t=e.latestMessage)||void 0===t?void 0:t.sender.pseudo)===s.pseudo?"You":null===(l=e.latestMessage)||void 0===l?void 0:l.sender.pseudo}),(0,h.jsxs)("p",{className:"text-muted",children:[(0,a.F8)(null===(r=e.latestMessage)||void 0===r?void 0:r.message)," "]})]})]},e._id)}))]}),(0,t.useMemo)((function(){return(0,h.jsxs)("div",{className:"freind-requests",children:[(0,h.jsx)("h4",{children:"Suggestions"}),v?(0,h.jsx)("div",{className:"feed",children:"Loading....."}):(0,h.jsxs)(h.Fragment,{children:[b&&b.map((function(i){for(var n=0;n<e.length;n++)if(i===e[n]._id&&i!==s._id)return(0,h.jsxs)("div",{className:"request",children:[(0,h.jsxs)("div",{className:"info",children:[(0,h.jsx)("div",{className:"profile-picture",children:(0,h.jsx)(u.Z,{src:e[n].picture,alt:"aa"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)(o.rU,{className:"linkProfile",to:"/profile/".concat(e[n]._id),children:(0,h.jsx)("h5",{className:"noum",children:e[n].pseudo})}),(0,h.jsxs)("p",{className:"text-muted",children:[e[n].following.length," following"]})]})]}),(0,h.jsxs)("div",{className:"action",children:[(0,h.jsx)(d.Z,{idTofollow:i,type:"suggestion"}),(0,h.jsx)("button",{className:" btn-new",children:"gretting"})]})]},Math.random())})),(0,h.jsx)("div",{className:"request",children:(0,h.jsx)("div",{className:"profile-picture-ab",children:"For Looking others......"})})]})]})}),[b,e,v,s._id])]})})}));s.Z=f},6587:function(e,s,i){var n=i(4165),t=i(5861),l=i(9439),r=i(1243),o=i(2791),a=i(9434),c=i(7498),d=i(1896),u=i(4212),h=i(184);s.Z=function(e){var s=e.idTofollow,i=e.type,f=e.socket,v=(0,o.useState)(!1),m=(0,l.Z)(v,2),x=m[0],p=m[1],g=(0,a.I0)(),j=(0,a.v9)((function(e){return e.userInfo})),N=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(s,i){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,(0,r.Z)({method:"patch",url:"".concat(u.L,"/api/user/follow/").concat(s),withCredentials:!0,data:{idToFollow:i}}).then((function(e){g(c.Z.Follow(i)),(0,r.Z)({method:"patch",url:"".concat(u.L,"/api/post/notification/").concat(i),data:{notifieId:j._id,notifiePseudo:j.pseudo,notification:"start following  u",status:"pending",pictureNotifie:j.picture},withCredentials:!0}).then((function(e){console.log(e),f.emit("sendNotification",{senderName:j._id,resverName:i,timeNot:new Date})})).catch((function(e){return console.log(e)}))})).catch((function(e){console.log(e.message)}));case 3:case"end":return e.stop()}}),e)})));return function(s,i){return e.apply(this,arguments)}}(),w=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(i,t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!1),e.next=3,(0,r.Z)({method:"patch",url:"".concat(u.L,"/api/user/unfollow/").concat(i),withCredentials:!0,data:{idToUnFollow:t}}).then((function(e){g(c.Z.UnFollow(s))})).catch((function(e){console.log(e.message)}));case 3:case"end":return e.stop()}}),e)})));return function(s,i){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){(0,d.xb)(j.following)||(j.following.includes(s)?p(!0):p(!1))}),[j,s]),(0,h.jsxs)(h.Fragment,{children:[!0===x&&(0,h.jsxs)("span",{onClick:function(){return w(j._id,s)},children:["suggestion"===i&&(0,h.jsx)("button",{className:"btn btn-primary",children:"UnFollow"}),"card"===i&&(0,h.jsx)("i",{className:"ri-checkbox-circle-fill"})]}),!1===x&&s!==j._id&&(0,h.jsxs)("span",{onClick:function(){return N(j._id,s)},children:["suggestion"===i&&(0,h.jsx)("button",{className:"btn btn-primary",children:"follow"}),"card"===i&&(0,h.jsx)("i",{className:"ri-checkbox-circle-line"})]}),!1===x&&s===j._id&&(0,h.jsxs)("span",{children:["suggestion"===i&&(0,h.jsx)("button",{className:"btn btn-primary disableButton",children:"follow"}),"card"===i&&(0,h.jsx)("i",{className:"ri-checkbox-circle-line"})]})]})}},3682:function(e,s,i){i.r(s);var n=i(4165),t=i(5861),l=i(9439),r=i(2791),o=i(367),a=i(3821),c=i(7689),d=i(6587),u=i(3044),h=i(9445),f=i(9453),v=i(1087),m=i(4212),x=i(1243),p=i(9434),g=i(184);s.default=function(){var e=(0,p.v9)((function(e){return e.userInfo})),s=(0,p.v9)((function(e){return e.getusers})),i=(0,p.v9)((function(e){return e.Allpost})),j=(0,r.useState)(),N=(0,l.Z)(j,2),w=N[0],b=N[1],Z=(0,r.useState)(),k=(0,l.Z)(Z,2),y=k[0],_=k[1],L=(0,r.useState)(),C=(0,l.Z)(L,2),S=C[0],M=C[1],E=(0,r.useState)(),F=(0,l.Z)(E,2),q=F[0],A=F[1],U=(0,p.I0)(),I=(0,c.UO)();return(0,r.useEffect)((function(){if((null===w||void 0===w?void 0:w.length)>0){var e=document.querySelector(".carousel");document.querySelectorAll(".himfollowers i").forEach((function(s){s.addEventListener("click",(function(s){console.log(s.target.id),"left"===s.target.id?e.scrollLeft-=10:e.scrollLeft+=10}))}));var s,i,n=!1;e.addEventListener("mousedown",(function(t){n=!0,e.classList.add("dragging"),s=t.pageX,i=e.scrollLeft})),e.addEventListener("mousemove",(function(t){n&&(e.scrollLeft=i-(t.pageX-s))})),document.addEventListener("mouseup",(function(){n=!1,e.classList.remove("dragging")}))}}),[null===w||void 0===w?void 0:w.length]),(0,r.useEffect)((function(){if(I.id){var e=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I.id){e.next=3;break}return e.next=3,(0,x.Z)({method:"get",url:"".concat(m.L,"/api/user/").concat(I.id),withCredentials:!0}).then((function(e){var s=e.data;A(s)})).catch((function(){return console.log("no data found")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}var s=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I.id){e.next=3;break}return e.next=3,(0,x.Z)({method:"get",url:"".concat(m.L,"/api/user"),withCredentials:!0}).then((function(e){U(f.O.GetuAllsers(e.data))})).catch((function(){return U(f.O.GetuAllsers({message:"no user exist now"}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();s();var i=function(){var e=(0,t.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I.id){e.next=3;break}return e.next=3,(0,x.Z)({method:"get",url:"".concat(m.L,"/api/post"),withCredentials:!0}).then((function(e){var s=e.data;U(h.s.GetAll(s)),console.log("fetch again from profile outher ")})).catch((function(){return U(h.s.GetAll({message:"no post exist now"}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();i()}),[I.id]),(0,r.useEffect)((function(){if(I.id){var e=s.filter((function(e){return e.following.includes(I.id)}));console.log(e),b(e);var n=i.filter((function(e){return e.posterId===I.id}));M(n),console.log(n);for(var t=0,l=0;l<(null===S||void 0===S?void 0:S.length);l++)t+=S[l].likers.length;_(t)}}),[I.id,i]),(0,g.jsx)(o.Z,{title:"other profile",children:(0,g.jsx)("div",{className:"container",children:(0,g.jsxs)("div",{className:"wrapper",children:[(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,g.jsxs)("div",{className:"profile",children:[(0,g.jsx)("div",{className:"image",children:(0,g.jsx)("img",{src:null===q||void 0===q?void 0:q.picture,alt:q&&(null===q||void 0===q?void 0:q._id)})}),(0,g.jsxs)("div",{className:"wrapper-2",children:[(0,g.jsx)("div",{style:{width:"9rem",height:"9rem",overflow:"hidden",borderRadius:"50%",position:"relative",top:"-70px",left:"20px",border:"6px solid var(--color-white)"},children:(0,g.jsx)(u.Z,{style:{display:"absolute",top:"0",left:"0",width:"100%",height:"100%"},src:null===q||void 0===q?void 0:q.picture,alt:null===q||void 0===q?void 0:q.pseudo})}),(0,g.jsxs)("div",{className:"infos",children:[(0,g.jsx)("h4",{children:null===q||void 0===q?void 0:q.pseudo}),(0,g.jsx)("span",{children:"\xc9tudiant(e) \xe0 univeriste polytechinique de gitega(UPG)"}),(0,g.jsx)("small",{children:"kinyinya,ruyigi,burundi"}),(0,g.jsxs)("div",{className:"followFollowing",children:[(0,g.jsxs)("span",{children:[null===q||void 0===q?void 0:q.followers.length," followers"]}),(0,g.jsxs)("span",{children:[null===q||void 0===q?void 0:q.following.length," following"]}),(0,g.jsxs)("span",{children:[null===S||void 0===S?void 0:S.length," Posts"]}),(0,g.jsxs)("span",{children:[y," Likes"]})]}),(0,g.jsx)("span",{children:"la vie est plus bon que tu le pense mais aussi est plud dur que bon buy jeneiro hurley"}),(0,g.jsxs)("div",{className:"action",children:[(0,g.jsx)(d.Z,{idTofollow:I.id,type:"suggestion"})," ",(0,g.jsx)("button",{className:" btn-new",children:"gretting"})]})]})]})]}),(null===w||void 0===w?void 0:w.length)>0&&(0,g.jsxs)("div",{className:"himfollowers",children:[(null===w||void 0===w?void 0:w.length)>3&&(0,g.jsx)("i",{className:"ri-arrow-drop-left-line",id:"left"}),(0,g.jsx)("div",{className:"carousel",children:null===w||void 0===w?void 0:w.map((function(e,s){return(0,g.jsxs)("div",{className:"request",children:[(0,g.jsxs)("div",{className:"info",children:[(0,g.jsx)("div",{className:"profile-picture",children:(0,g.jsx)(u.Z,{src:null===e||void 0===e?void 0:e.picture,alt:"aa"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)(v.rU,{className:"linkProfile",to:"/profile/".concat(null===e||void 0===e?void 0:e._id),children:(0,g.jsx)("h5",{className:"noum",children:null===e||void 0===e?void 0:e.pseudo})}),(0,g.jsxs)("p",{className:"text-muted",children:[null===e||void 0===e?void 0:e.following.length," following"]})]})]}),(0,g.jsxs)("div",{className:"action",children:[(0,g.jsx)(d.Z,{idTofollow:e._id,type:"suggestion"}),(0,g.jsx)("button",{className:" btn-new",children:"gretting"})]})]},s)}))}),(null===w||void 0===w?void 0:w.length)>3&&(0,g.jsx)("i",{className:"ri-arrow-drop-right-line",id:"right"})]}),(0,g.jsx)("div",{className:"hisPosts",children:(0,g.jsxs)("div",{className:"feed",children:[(0,g.jsxs)("div",{className:"head",children:[(0,g.jsxs)("div",{className:"user",children:[(0,g.jsx)("div",{className:"profile-picture",children:(0,g.jsx)("img",{src:e.picture,alt:"ss"})}),(0,g.jsxs)("div",{className:"ingo",children:[(0,g.jsx)("h3",{children:e.pseudo}),(0,g.jsx)("small",{children:"burundi, 15 min ago"})]})]}),(0,g.jsx)("span",{className:"edit",children:(0,g.jsx)("i",{className:"ri-more-fill"})})]}),(0,g.jsx)("div",{className:"news",children:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Cupiditate, laboriosam!"}),(0,g.jsxs)("div",{className:"action-buttons",children:[(0,g.jsxs)("div",{className:"interaction-buttons",children:[(0,g.jsx)("i",{className:"ri-heart-line"}),"  ",(0,g.jsx)("i",{className:"ri-chat-3-line"}),"  ",(0,g.jsx)("i",{className:"ri-share-line"})]}),(0,g.jsx)("div",{className:"bookmark",children:(0,g.jsx)("i",{className:"ri-bookmark-line"})})]}),(0,g.jsxs)("div",{className:"liked_by",children:[(0,g.jsx)("span",{children:(0,g.jsx)("img",{src:e.picture,alt:"assa"})}),(0,g.jsx)("span",{children:(0,g.jsx)("img",{src:e.picture,alt:"ddf"})}),(0,g.jsx)("span",{children:(0,g.jsx)("img",{src:e.picture,alt:"ee"})}),(0,g.jsxs)("p",{children:["liked by ",(0,g.jsx)("b",{children:"janeiro hurley"})," ,",(0,g.jsx)("b",{children:"jubu niyoko"})," "]})]}),(0,g.jsx)("div",{className:"caption",children:(0,g.jsxs)("p",{children:[(0,g.jsx)("b",{children:"Lorem "})," ipsum dolor sit amet consectetur adipisicing"]})}),(0,g.jsx)("div",{className:" comments text-muted",children:(0,g.jsx)("small",{children:" view all 2k comments"})})]})})]}),(0,g.jsx)("div",{className:"leftProfile",children:e&&(0,g.jsx)(a.Z,{user:e})})]})})})}}}]);
//# sourceMappingURL=682.b447dd13.chunk.js.map